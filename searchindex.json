{"categories":[{"title":"blog","uri":"https://healinyoon.github.io/categories/blog/"},{"title":"ci/cd","uri":"https://healinyoon.github.io/categories/ci/cd/"},{"title":"cloud","uri":"https://healinyoon.github.io/categories/cloud/"},{"title":"devops","uri":"https://healinyoon.github.io/categories/devops/"},{"title":"gpu","uri":"https://healinyoon.github.io/categories/gpu/"},{"title":"jvm","uri":"https://healinyoon.github.io/categories/jvm/"},{"title":"linux","uri":"https://healinyoon.github.io/categories/linux/"},{"title":"msa","uri":"https://healinyoon.github.io/categories/msa/"},{"title":"programming","uri":"https://healinyoon.github.io/categories/programming/"}],"posts":[{"content":"Intro ì´ë²ˆ ì¥ì—ì„œëŠ” Helm Chartë¥¼ ë” ì˜ í™œìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì‚´í´ë³¸ë‹¤.\nHelm Chart ê¸°ë³¸ ëª…ë ¹ì–´ ì‚¬ìš© ë°©ë²• helm search: Chart ê²€ìƒ‰ Helmì€ ê°•ë ¥í•œ ê²€ìƒ‰ ëª…ë ¹ì–´ë¥¼ ì œê³µí•œë‹¤. ì•„ë˜ì˜ ë‘ ëª…ë ¹ì–´ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìœ í˜•ì˜ Repository Sourceë¡œë¶€í„° ê²€ìƒ‰í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n helm search hub: ì—¬ëŸ¬ ì €ì¥ì†Œì—ìˆëŠ” helm chartë¥¼ í¬ê´„í•˜ëŠ” [helm hub](https://artifacthub.io/)ì—ì„œ ê²€ìƒ‰í•œë‹¤. helm search repo: helm repo addë¥¼ ì‚¬ìš©í•˜ì—¬ local helm clientì— ì¶”ê°€í•œ ì €ì¥ì†Œì—ì„œ ê²€ìƒ‰í•œë‹¤. ê²€ìƒ‰ì€ local data ìƒì—ì„œ ì´ë£¨ì–´ì§€ë©°, í¼ë¸”ë¦­ ë„¤íŠ¸ì›Œí¬ ì ‘ì†ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.  helm search hub ì‚¬ìš© ì˜ˆì‹œ helm search hub ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ê³µê°œì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ chartë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.\n$ helm search hub wordpress URL CHART VERSION\tAPP VERSION\tDESCRIPTION https://hub.helm.sh/charts/bitnami/wordpress 9.9.1 5.5.3 Web publishing platform for building blogs and ... https://hub.helm.sh/charts/seccurecodebox/old-w...\t2.1.0 4.0 Insecure \u0026amp; Outdated Wordpress Instance: Never e... https://hub.helm.sh/charts/presslabs/wordpress-...\t0.10.5 0.10.5 Presslabs WordPress Operator Helm Chart  helm search repo ì‚¬ìš© ì˜ˆì‹œ helm search repo ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ì— ì¶”ê°€ëœ ì €ì¥ì†Œì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ chartë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.\n$ helm search repo wordpress NAME CHART VERSION\tAPP VERSION\tDESCRIPTION stable/wordpress\t9.0.3 5.3.2   (ì°¸ê³ ) helm searchëŠ” fuzzy string matcing ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê²€ìƒ‰ì‹œ ë‹¨ì–´ ë˜ëŠ” êµ¬ë¬¸ì˜ ì¼ë¶€ë¶„ë§Œ ì…ë ¥í•´ë„ ëœë‹¤.\n $ helm search repo word NAME CHART VERSION\tAPP VERSION\tDESCRIPTION stable/wordpress\t9.0.3 5.3.2 DEPRECATED Web publishing platform for building... $ helm search repo wordp NAME CHART VERSION\tAPP VERSION\tDESCRIPTION stable/wordpress\t9.0.3 5.3.2 DEPRECATED Web publishing platform for building...  helm install: Chart íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì‚¬ìš©í•˜ë ¤ëŠ” Chartë¥¼ ì°¾ì€ í›„ì—ëŠ” helm install {ì‚¬ìš©ì ì§€ì • release name} {chart name} ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜í•´ì¤€ë‹¤.\n$ helm install my-mariadb stable/mariadb WARNING: This chart is deprecated NAME: my-mariadb LAST DEPLOYED: Tue Nov 3 05:07:12 2020 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: This Helm chart is deprecated (ì¤‘ëµ)  Chartë¥¼ ì„¤ì¹˜í•˜ë©´ ìƒˆë¡œìš´ relase ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ ì•Œì•„ë‘ì. ìœ„ì˜ ëª…ë ¹ì–´ì—ì„œ releaseì˜ ì´ë¦„ì€ my-mariadbì´ë‹¤. ë§Œì•½ ë³„ë„ì˜ ì‚¬ìš©ì ì§€ì • release name ì—†ì´ helmì´ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ --generate-name ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\nHelmì€ releaseì‹œ ì„¤ì¹˜ë˜ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ running ìƒíƒœë¡œ ë³€í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ releaseì˜ ë¦¬ì†ŒìŠ¤ ìƒíƒœ ì¶”ì²™ì„ ê³„ì†í•˜ê±°ë‚˜, êµ¬ì„± ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‹¶ì„ ë•ŒëŠ” helm status ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì.\n$ helm status my-mariadb NAME: my-mariadb LAST DEPLOYED: Tue Nov 3 05:40:42 2020 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: This Helm chart is deprecated  ê·¸ëŸ°ë°.. helm status ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ë„ ê° ë¦¬ì†ŒìŠ¤ ìƒíƒœê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤. ì›ë˜ Helm version2ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥ë˜ëŠ”ë°, version3ì—ì„œ ë¶€í„° ë¦¬ì†ŒìŠ¤ ì¶œë ¥ì´ ì‚¬ë¼ì¡Œë‹¤.\n (Helm version2ì—ì„œì˜ helm status ì¶œë ¥ ì˜ˆì‹œ)\n $ helm status mychart LAST DEPLOYED: Fri Jun 28 11:16:50 2019 NAMESPACE: default STATUS: DEPLOYED RESOURCES: ==\u0026gt; v1/Deployment NAME READY UP-TO-DATE AVAILABLE AGE mychart 1/1 1 1 4m2s ==\u0026gt; v1/Pod(related) NAME READY STATUS RESTARTS AGE mychart-b9488ff5c-b6xzz 1/1 Running 0 4m2s ==\u0026gt; v1/Service NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE mychart ClusterIP 10.110.150.104 \u0026lt;none\u0026gt; 80/TCP 4m2s  ì›ì¸ì„ ì°¾ì•„ë³´ë‹ˆ, \u0026ldquo;The main reason for this is that by doing this in Helm, it leads to code duplication (we basically end up copying kubectl code), possible bugs, and maintenance overhead in the Helm codebase. So I think it would be better to keep it out(ìƒì„¸ ë‚´ìš© í™•ì¸í•˜ê¸°).\u0026quot; ë¼ê³  ë…¼ì˜ë˜ê³  ìˆë‹¤. í•´ê²°í•˜ê¸° ìœ„í•œ ë…¸ë ¥(ì°¸ê³ )ì´ ì´ë£¨ì–´ì§€ê³  ìˆì§€ë§Œ, ì•„ì§ê¹Œì§€ëŠ” ì§€ì›ë˜ì§€ ì•ŠëŠ”ë‹¤.\nì•„ì‰½ì§€ë§Œ kubectl get all ëª…ë ¹ì–´ë¡œ ì¡°íšŒí•˜ì.\n$ kubectl get all | grep my-mariadb pod/my-mariadb-master-0 0/1 Pending 0 44m pod/my-mariadb-slave-0 0/1 Pending 0 44m service/my-mariadb ClusterIP 10.104.91.81 \u0026lt;none\u0026gt; 3306/TCP 44m service/my-mariadb-slave ClusterIP 10.105.42.35 \u0026lt;none\u0026gt; 3306/TCP 44m statefulset.apps/my-mariadb-master 0/1 44m statefulset.apps/my-mariadb-slave 0/1 44m  ì„¤ì¹˜ ì „ Chart ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ëŠ” ë°©ë²• ì—¬\nì¶œì²˜  https://helm.sh/ko/docs/intro/using_helm/  ","id":0,"section":"posts","summary":"Intro ì´ë²ˆ ì¥ì—ì„œëŠ” Helm Chartë¥¼ ë” ì˜ í™œìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì‚´í´ë³¸ë‹¤. Helm Chart ê¸°ë³¸ ëª…ë ¹ì–´ ì‚¬ìš© ë°©ë²• helm search: Chart ê²€ìƒ‰ Helmì€ ê°•ë ¥í•œ ê²€ìƒ‰ ëª…ë ¹ì–´ë¥¼ ì œê³µí•œë‹¤. ì•„ë˜ì˜ ë‘ ëª…","tags":["kubernetes","helm"],"title":"Helm(2) - Helm Chart ì‚¬ìš© ë°©ë²•","uri":"https://healinyoon.github.io/2020/11/20201103_helm_02/","year":"2020"},{"content":"Helm ì´ë€? Helmì€ Kubernetes package managing toolì´ë‹¤. Pythonì—ì„œì˜ pip, Node.jsì—ì„œì˜ npmê³¼ ê°™ì€ ì—­í• ì„ í•˜ëŠ” Kubernetes package ì„¤ì¹˜ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” toolì´ë¼ê³  ë³´ë©´ ëœë‹¤.\nHelmì˜ í•„ìš”ì„± Kubernetestì— í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” ê°„ë‹¨í•˜ê²Œ Podë§Œ ë°°í¬í•´ì„œëŠ” ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš°ê°€ ë§ë‹¤. ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ Service, Pod ê´€ë¦¬ë¥¼ ìœ„í•œ Deploymentë“± ì¶”ê°€ì ì¸ ë¦¬ì†ŒìŠ¤ ë°°í¬ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\nì´ë¥¼ ìœ„í•´ Helmì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆ ë°°í¬ëŠ” ë¬¼ë¡ ì´ê³ , ì´ì— í•„ìš”í•œ Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ëª¨ë‘ íŒ¨í‚¤ì§€ í˜•íƒœë¡œ ë°°í¬í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.\nHelmì˜ êµ¬ì„±ë„ ì´ë¯¸ì§€ ì¶œì²˜: https://tech.osci.kr/2019/11/23/86027123/\nHelm Chart Helm íŒ¨í‚¤ì§€ì´ë‹¤. ì´ íŒ¨í‚¤ì§€ì—ëŠ” Kubernetest í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì •ì˜ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.\nHelm Chart Repository Helm Chartë¥¼ ì €ì¥í•˜ê³  ê³µìœ í•˜ëŠ” ì €ì¥ì†Œì´ë‹¤.\nRelease Kubernetes í´ëŸ¬ìŠ¤í„°ì—ì„œ êµ¬ë™ë˜ëŠ” Chartì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤. ì¼ë°˜ì ìœ¼ë¡œ í•˜ë‚˜ì˜ ChartëŠ” ë™ì¼í•œ í´ëŸ¬ìŠ¤í„° ë‚´ì— ì—¬ëŸ¬ë²ˆ ì„¤ì¹˜ë  ìˆ˜ ìˆë‹¤. ì„¤ì¹˜í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ Releaseê°€ ìƒì„±ëœë‹¤.\nHelm Client Helm Server ëª¨ë“ˆê³¼ í†µì‹ í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\nHelm Server(Tiller) Helm Clientì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì—¬ Kubernetesì— Chartë¥¼ ì„¤ì¹˜í•˜ê³  ë¦´ë¦¬ì¦ˆë¥¼ ê´€ë¦¬í•œë‹¤.\nHelm ì„¤ì¹˜í•˜ê¸°  Helm ê³µì‹ ì„¤ì¹˜ ë¬¸ì„œ  Helm ì„¤ì¹˜ Helmì„ ì„¤ì¹˜í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ì´ ìˆìœ¼ë‚˜, ì—¬ê¸°ì„œëŠ” Helmì—ì„œ ì œê³µí•˜ëŠ” ìµœì‹  ë²„ì „ì„ ìë™ìœ¼ë¡œ ê°€ì ¸ì™€ì„œ ì„¤ì¹˜í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤.\n$ curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3  $ chmod 700 get_helm.sh  $ ./get_helm.sh Downloading https://get.helm.sh/helm-v3.4.0-linux-amd64.tar.gz Verifying checksum... Done. Preparing to install helm into /usr/local/bin helm installed into /usr/local/bin/helm  Helm Chart Repository ì´ˆê¸°í™” Helmì´ ì¤€ë¹„ë˜ë©´ Chart Repositoryë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. í˜„ì¬ repositoryë¥¼ ì¡°íšŒí•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì•„ë¬´ê²ƒë„ ì—†ë‹¤ê³  ì¶œë ¥ëœë‹¤.\n$ helm repo list Error: no repositories to show  ë‹¤ì–‘í•œ ì €ì¥ì†Œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆì§€ë§Œ ê°€ì¥ ê¸°ë³¸ì¸ Helm official stable chartsë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.\n$ helm repo add stable https://charts.helm.sh/stable \u0026quot;stable\u0026quot; has been added to your repositories $ helm repo list NAME URL stable\thttps://charts.helm.sh/stable  stableì—ì„œ ì œê³µí•˜ëŠ” chart ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.\n$ helm search repo stable NAME CHART VERSION\tAPP VERSION DESCRIPTION stable/acs-engine-autoscaler 2.2.2 2.1.1 DEPRECATED Scales worker nodes within agent pools stable/aerospike 0.3.3 v4.5.0.5 A Helm chart for Aerospike in Kubernetes stable/airflow 7.13.2 1.10.12 Airflow is a platform to programmatically autho... stable/ambassador 5.3.2 0.86.1 DEPRECATED A Helm chart for Datawire Ambassador (ì¤‘ëµ)  Helm Chart Repository ì—…ë°ì´íŠ¸ Repositoryë¡œ ë¶€í„° ìµœì‹  Chartë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ê¸° ìœ„í•´ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì¹˜ ì´ì „ì— repositoryë¥¼ ì—…ë°ì´íŠ¸í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.\n$ helm repo update Hang tight while we grab the latest from your chart repositories... ...Successfully got an update from the \u0026quot;stable\u0026quot; chart repository Update Complete. âˆHappy Helming!âˆ  Helm Chart Repository ì‚¬ìš©í•´ë³´ê¸° Helm Chart í™•ì¸ Helm Chartë¥¼ ì°¾ì•„ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì¹˜í•˜ëŠ” ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì´ ìˆì§€ë§Œ, ì‹œì‘í•˜ê¸° ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ìœ„ì—ì„œ êµ¬ì„±í•œ official stable chart ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ë‹¤.\nì—¬ê¸°ì„œëŠ” mysqlì„ ì˜ˆì‹œë¡œ ì„¤ì¹˜í•´ë³¸ë‹¤.\nì„¤ì¹˜í•˜ë ¤ëŠ” MySQL chartì˜ ê°„ë‹¨í•œ ì •ë³´ëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.\n$ helm show chart stable/mysql apiVersion: v1 appVersion: 5.7.30 description: Fast, reliable, scalable, and easy to use open-source relational database system. home: https://www.mysql.com/ icon: https://www.mysql.com/common/logos/logo-mysql-170x115.png keywords: - mysql - database - sql maintainers: - email: o.with@sportradar.com name: olemarkus - email: viglesias@google.com name: viglesiasce name: mysql sources: - https://github.com/kubernetes/charts - https://github.com/docker-library/mysql version: 1.6.7  ë§Œì•½ í•´ë‹¹ chartì— ëŒ€í•œ ëª¨ë“  ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì(ìƒë‹¹íˆ ë§ì€ ì •ë³´ê°€ ì¶œë ¥ëœë‹¤).\n$ helm show all stable/mysql  Helm Chartë¥¼ ì´ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì¹˜ ì´ì œ helm chartë¥¼ ì´ìš©í•˜ì—¬ MySQL ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì¹˜í•´ë³´ì.\n$ helm install stable/mysql --generate-name NAME: mysql-1604311201 LAST DEPLOYED: Mon Nov 2 10:00:04 2020 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: MySQL can be accessed via port 3306 on the following DNS name from within your cluster: mysql-1604311201.default.svc.cluster.local To get your root password run: MYSQL_ROOT_PASSWORD=$(kubectl get secret --namespace default mysql-1604311201 -o jsonpath=\u0026quot;{.data.mysql-root-password}\u0026quot; | base64 --decode; echo) To connect to your database: 1. Run an Ubuntu pod that you can use as a client: kubectl run -i --tty ubuntu --image=ubuntu:16.04 --restart=Never -- bash -il 2. Install the mysql client: $ apt-get update \u0026amp;\u0026amp; apt-get install mysql-client -y 3. Connect using the mysql cli, then provide your password: $ mysql -h mysql-1604311201 -p To connect to your database directly from outside the K8s cluster: MYSQL_HOST=127.0.0.1 MYSQL_PORT=3306 # Execute the following command to route the connection: kubectl port-forward svc/mysql-1604311201 3306 mysql -h ${MYSQL_HOST} -P${MYSQL_PORT} -u root -p${MYSQL_ROOT_PASSWORD}  ìœ„ì˜ ì˜ˆì—ì„œ stable/mysql chartê°€ ì„¤ì¹˜ë˜ì—ˆê³ , ì´ë¦„ì€ mysql-1604311201ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nHelm chartë¡œ ì„¤ì¹˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¡°íšŒí•´ë³´ì.\n$ helm ls NAME NAMESPACE\tREVISION\tUPDATED STATUS CHART APP VERSION mysql-1604311201\tdefault 1 2020-11-02 10:00:04.300938829 +0000 UTC\tdeployed\tmysql-1.6.7\t5.7.30  ë‹¹ì—°íˆ kubectlë¡œë„ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.\n$ kubectl get all NAME READY STATUS RESTARTS AGE pod/mysql-1604311201-654cf77476-w58m7 0/1 Pending 0 35m NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 55d service/mysql-1604311201 ClusterIP 10.111.137.120 \u0026lt;none\u0026gt; 3306/TCP 35m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/mysql-1604311201 0/1 1 0 35m NAME DESIRED CURRENT READY AGE replicaset.apps/mysql-1604311201-654cf77476 1 1 0 35m  ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì¹˜ë¥¼ ìœ„í•´ í•„ìš”í•œ ëª¨ë“  kubernetes ë¦¬ì†ŒìŠ¤ê°€ í•¨ê»˜ ì„¤ì¹˜ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\nì´ë ‡ê²Œ Helm chartë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜ë¥¼ í•˜ê²Œ ë˜ë©´ ìƒˆë¡œìš´ releaseê°€ ëœê²ƒì´ë‹¤. ì¦‰ í•˜ë‚˜ì˜ Helm chartë¡œ ì—¬ëŸ¬ë²ˆì˜ ì„¤ì¹˜ë¥¼ í•  ìˆ˜ ìˆëŠ”ë°, ì´ë•Œ ê°ê°ì˜ ì„¤ì¹˜ëŠ” ë®ì–´ì”Œì–´ì§€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬ë˜ê³  ì—…ê·¸ë ˆì´ë“œëœë‹¤.\nê·¸ë ‡ë‹¤ë©´ ì‹¤ì œë¡œ ê·¸ë ‡ê²Œ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•´ë³´ì. ìœ„ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ mysqlì„ í•˜ë‚˜ ë” ì„¤ì¹˜í•œë‹¤.\n$ helm install stable/mysql --generate-name NAME: mysql-1604313417 LAST DEPLOYED: Mon Nov 2 10:37:00 2020 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: MySQL can be accessed via port 3306 on the following DNS name from within your cluster: mysql-1604313417.default.svc.cluster.local  helm lsë¡œ ì¡°íšŒí•´ë³´ë©´ ìƒˆë¡œìš´ releaseê°€ ìƒì„±ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆê³ \n$ helm ls NAME NAMESPACE\tREVISION\tUPDATED STATUS CHART APP VERSION mysql-1604311201\tdefault 1 2020-11-02 10:00:04.300938829 +0000 UTC\tdeployed\tmysql-1.6.7\t5.7.30 mysql-1604313417\tdefault 1 2020-11-02 10:37:00.578674443 +0000 UTC\tdeployed\tmysql-1.6.7\t5.7.30  kubectl get allë¡œ ì¡°íšŒí•´ë„ ë§ˆì°¬ê°€ì§€ë¡œ ë…ë¦½ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„¤ì¹˜ë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n$ kubectl get all NAME READY STATUS RESTARTS AGE pod/mysql-1604311201-654cf77476-w58m7 0/1 Pending 0 39m pod/mysql-1604313417-9685cfbd6-srxtl 0/1 Pending 0 2m53s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 55d service/mysql-1604311201 ClusterIP 10.111.137.120 \u0026lt;none\u0026gt; 3306/TCP 39m service/mysql-1604313417 ClusterIP 10.104.229.201 \u0026lt;none\u0026gt; 3306/TCP 2m53s NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/mysql-1604311201 0/1 1 0 39m deployment.apps/mysql-1604313417 0/1 1 0 2m53s NAME DESIRED CURRENT READY AGE replicaset.apps/mysql-1604311201-654cf77476 1 1 0 39m replicaset.apps/mysql-1604313417-9685cfbd6 1 1 0 2m53s  Helm Chartë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì¹˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì œê±° Helm chartë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì¹˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œê±°í•˜ëŠ” ë°©ë²•ì€ ì•„ì£¼ ê°„ë‹¨í•˜ë‹¤.\n$ helm uninstall mysql-1604311201 release \u0026quot;mysql-1604311201\u0026quot; uninstalled $ helm uninstall mysql-1604313417 release \u0026quot;mysql-1604313417\u0026quot; uninstalled $ helm ls NAME\tNAMESPACE\tREVISION\tUPDATED\tSTATUS\tCHART\tAPP VERSION  ì¶œì²˜  https://bcho.tistory.com/1335 https://helm.sh/docs/intro/install/ https://docs.helm.sh/docs/intro/quickstart/ https://tech.osci.kr/2019/11/23/86027123/  ","id":1,"section":"posts","summary":"Helm ì´ë€? Helmì€ Kubernetes package managing toolì´ë‹¤. Pythonì—ì„œì˜ pip, Node.jsì—ì„œì˜ npmê³¼ ê°™ì€ ì—­í• ì„ í•˜ëŠ” Kubernetes package ì„¤ì¹˜ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” toolì´ë¼ê³  ë³´ë©´","tags":["kubernetes","helm"],"title":"Helm(1) - Helm ì„¤ì¹˜ ë° ì‚¬ìš© ë°©ë²•","uri":"https://healinyoon.github.io/2020/11/20201103_helm_01/","year":"2020"},{"content":"Intro Kubernetesì—ì„œ GPUë¥¼ ì‚¬ìš©í•˜ë„ë¡ í™˜ê²½ì„ êµ¬ì¶•í•˜ê³  ì‚¬ìš©í•´ë³´ì.\nì‚¬ì „ ìš”êµ¬ ì‚¬í•­ ì•„ë˜ì˜ ë‚´ìš©ì´ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ì „ì œë¡œ ì§„í–‰í•˜ë¯€ë¡œ, ì•„ì§ ì¶©ì¡±ë˜ì§€ ì•Šì€ ì¡°ê±´ì´ ìˆë‹¤ë©´ ì„ í–‰í•´ì£¼ì.\n1. kubernetes cluster êµ¬ì¶• ì•„ì§ êµ¬ì¶•ì´ ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ Kubernetes Cluster ì„¤ì¹˜í•˜ê¸°(ubuntu18.04)ë¥¼ ì°¸ê³ í•˜ì—¬ ì§„í–‰\n2. nvidia-docker ì„¤ì¹˜ ì•„ì§ ì„¤ì¹˜ê°€ ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ nvidia-docker install guideë¥¼ ì°¸ê³ í•˜ì—¬ ì§„í–‰\n1. Nvidia Plugin Pod ìƒì„± ref)  Nvidia k8s-device-plugin ê³µì‹ ì‚¬ì´íŠ¸ Nvidia docker ê³µì‹ ì‚¬ì´íŠ¸  1.1 ê°€ì¥ ì •ë³´ê°€ ë§ì•˜ë˜ YAMLìœ¼ë¡œ ì„¤ì¹˜, ê·¸ëŸ¬ë‚˜ ì‹¤íŒ¨ ì²˜ìŒì— ì—¬ê¸° ë§í¬ë¥¼ ì°¸ê³ í•˜ì—¬ ì§„í–‰í–ˆë‹¤.\në‹¤ë§Œ ì•„ë˜ì™€ ê°™ì´ ë²„ì „ë§Œ ë³€ê²½í•˜ì—¬ ì‹¤í–‰í–ˆë‹¤.\n$ kubectl apply -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v1.12/nvidia-device-plugin.yml daemonset.extensions/nvidia-device-plugin- daemonset-1.12 created  í•˜ì§€ë§Œ ì•„ë˜ ì´ìŠˆ ë°œìƒí•´ì„œ ì‹¤íŒ¨í–ˆë‹¤ â†“ â†“ â†“\n1.2. ì´ìŠˆ 1.2.1. ì´ìŠˆ ë‚´ìš© ì¿ ë²„ë„¤í‹°ìŠ¤ 1.15 ë²„ì „ ì´í•˜ë¥¼ ì„¤ì¹˜í–ˆì„ ê²½ìš° ë¬¸ì œ ì—†ê² ì§€ë§Œ, 1.16 ë²„ì „ ì´ìƒì„ ì„¤ì¹˜í–ˆì„ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.\nerror: unable to recognize \u0026quot;https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v1.12/nvidia-device-plugin.yml\u0026quot;: no matches for kind \u0026quot;DaemonSet\u0026quot; in version \u0026quot;extensions/v1beta1\u0026quot;  ì´ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ì´ ì—…ê·¸ë ˆì´ë“œ ë˜ë©´ì„œ, Daemonsetì˜ extensions/v1beta1 ë²„ì „ì„ ë”ì´ìƒ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.\nâ†’ 1) ë”°ë¼ì„œ ë²„ì „ì„ apps/v1 ìœ¼ë¡œ ë³€ê²½í•˜ê³  selector objectë¥¼ ì¶”ê°€í•œ í›„\nâ†’ 2) k8s-device-pluginì„ ë‹¤ì‹œ ì„¤ì¹˜í•˜ê³ \nâ†’ 3) ë§¤ë‹ˆíŒ¨ìŠ¤íŠ¸ íŒŒì¼ë„ ì ì ˆí•˜ê²Œ ìˆ˜ì •í•´ì£¼ì—ˆë‹¤.\nref)  Kubectl convert ì°¸ê³  ìë£Œ No matches ì´ìŠˆ í•´ê²° ìë£Œ   (ì°¸ê³ ) Pod ìƒì„± ì‹¤íŒ¨ì‹œ ì—ëŸ¬ ì •ë³´ í™•ì¸\n $ kubectl describe pod {pod ëª…}  1.2.2. ë³€ê²½í•œ YAML íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ DaemonSet Pod ìƒì„± ì´ì œ ì»¤ìŠ¤í„° ë§ˆì´ì§•í•œ YAML íŒŒì¼ë¡œ Podë¥¼ ìƒì„±í•´ë³´ì.\n gpu-plugin.yaml\n apiVersion: apps/v1 kind: DaemonSet metadata: name: nvidia-device-plugin-daemonset-1.12 namespace: kube-system spec: updateStrategy: type: RollingUpdate selector: matchLabels: name: nvidia-device-plugin-ds template: metadata: # Mark this pod as a critical add-on; when enabled, the critical add-on scheduler # reserves resources for critical add-on pods so that they can be rescheduled after # a failure. This annotation works in tandem with the toleration below. annotations: scheduler.alpha.kubernetes.io/critical-pod: \u0026quot;\u0026quot; labels: name: nvidia-device-plugin-ds spec: tolerations: # Allow this pod to be rescheduled while the node is in \u0026quot;critical add-ons only\u0026quot; mode. # This, along with the annotation above marks this pod as a critical add-on. - key: CriticalAddonsOnly operator: Exists - key: nvidia.com/gpu operator: Exists effect: NoSchedule containers: - image: nvidia/k8s-device-plugin:1.11 name: nvidia-device-plugin-ctr securityContext: allowPrivilegeEscalation: false capabilities: drop: [\u0026quot;ALL\u0026quot;] volumeMounts: - name: device-plugin mountPath: /var/lib/kubelet/device-plugins volumes: - name: device-plugin hostPath: path: /var/lib/kubelet/device-plugins nodeSelector: gpus: \u0026quot;true\u0026quot;  ìœ„ì˜ ë§¤ë‹ˆíŒ¨ìŠ¤íŠ¸ ì£¼ìš” ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\nâ‘  ë¦¬ì†ŒìŠ¤ ìœ í˜• = DaemonSet\nkind: DaemonSet  ë”°ë¼ì„œ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ëª¨ë“  worker ë…¸ë“œ í•˜ë‚˜ì”© ë™ì‘í•˜ê²Œ í•œë‹¤.  â‘¡ RollingUpdate\nspec.selector.matchLabels.name\nname: nvidia-device-plugin-ds  spec.template.matadata.labels.name\nlabels: name: nvidia-device-plugin-ds  name objectê°€ nvidia-device-plugin-ds ì¸ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•˜ì—¬ RollingUpdateë¥¼ ì„¤ì •í•œë‹¤.\nâ‘¢ node Label ì§€ì •\nspec.template.spec.nodeSelector ë¡œ ì–´ëŠ ë…¸ë“œì˜ DaemonSetìœ¼ë¡œ ë„ì›Œì¤„ ê²ƒì¸ì§€ ë ˆì´ë¸”ë§í•´ì¤€ë‹¤.\nnodeSelector: gpus: \u0026quot;true\u0026quot;  1.3. gpu-plugin DeamonSet Pod ì •ìƒ ë™ì‘ í™•ì¸ $ kubectl -n kube-system get pod -l name=nvidia-device-plugin-ds NAME READY STATUS RESTARTS AGE nvidia-device-plugin-daemonset-1.12-d7t2g 1/1 Running 0 48d nvidia-device-plugin-daemonset-1.12-jmcg9 1/1 Running 0 48d nvidia-device-plugin-daemonset-1.12-zhsqm 1/1 Running 0 4h8mubectl -n kube-system get pod -l name=nvidia-device-plugin-ds NAME READY STATUS RESTARTS AGE nvidia-device-plugin-daemonset-1.12-7kh27 1/1 Running 0 27m $ kubectl -n kube-system logs -l name=nvidia-device-plugin-ds 2020/07/01 05:02:30 Loading NVML 2020/07/01 05:02:30 Fetching devices. 2020/07/01 05:02:30 Starting FS watcher. 2020/07/01 05:02:30 Starting OS watcher. 2020/07/01 05:02:30 Starting to serve on /var/lib/kubelet/device-plugins/nvidia.sock 2020/07/01 05:02:30 Registered device plugin with Kubelet  ğŸŒŸğŸŒŸ ì—¬ê¸°ì„œ ì ê¹! ğŸŒŸğŸŒŸ ì¤‘ìš”í•œ ì‚¬í•­ì€ gpuë¥¼ ì‚¬ìš©í•˜ë ¤ëŠ” Worker nodeê°€ gpus: \u0026quot;true\u0026quot; ë ˆì´ë¸”ë§ì´ ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n ë§Œì•½ GPUê°€ ìˆëŠ” nodeì¸ë° í•´ë‹¹ DeamonSetì´ ì˜¬ë¼ê°€ìˆì§€ ì•Šê±°ë‚˜ ì‹ ê·œ Worker nodeë¥¼ ì¶”ê°€í•˜ë ¤ëŠ” ê²½ìš°  â‡’ kubectl label nodes {Worker node ëª…} gpus=true ë¡œ ë ˆì´ë¸”ë§ì„ í•´ì£¼ì.\n2. GPU ê°œìˆ˜ í™•ì¸ ì´ì œ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ì‚¬ìš© ê°€ëŠ¥í•œ GPU ê°œìˆ˜ë¥¼ í™•ì¸í•´ë³´ì.\nmaster nodeì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ê° worker nodeì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ GPU ê°œìˆ˜ê°€ ì¶œë ¥ëœë‹¤.\n$ kubectl get nodes \u0026quot;-o=custom-columns=NAME:.metadata.name,GPU:.status.allocatable.nvidia\\.com/gpu\u0026quot; NAME GPU gpu-1080ti-XX 9 gpu-1080ti-XX 9  3. Podì—ì„œ ê·¸ë˜í”½ ì¹´ë“œ ëª…ë ¹ì–´ í…ŒìŠ¤íŠ¸ 3.1. GPUë¥¼ ì‚¬ìš©í•˜ëŠ” Pod ìƒì„±í•˜ê¸° 3.1.1. YAML íŒŒì¼  gpu-k8s.yaml\n apiVersion: v1 kind: Pod metadata: name: gpu-k8s spec: containers: - name: gpu-container image: nvidia/cuda:9.0-runtime command: - \u0026quot;/bin/sh\u0026quot; - \u0026quot;-c\u0026quot; args: - nvidia-smi \u0026amp;\u0026amp; tail -f /dev/null resources: requests: nvidia.com/gpu: 2 limits: nvidia.com/gpu: 2  ###ref) nvidia/cuda ë„ì»¤ ì´ë¯¸ì§€ ë²„ì „ì´ ë§ì§€ ì•Šì€ ì´ìŠˆ ë°œìƒ ì‹œ â‡’ ë„ì»¤ í—ˆë¸Œì—ì„œ ë§ëŠ” ì´ë¯¸ì§€ ë²„ì „ì„ ì°¾ì•„ì„œ ì‚¬ìš©í•´ì£¼ë©´ ëœë‹¤.\n Docker Hub Kubernetes Resource Requestì™€ Limitì˜ ì´í•´ Schedule GPUs  3.1.2. Pod ìƒì„± ë° í™•ì¸ $ kubectl apply -f gpu-k8s.yaml pod/gpu-k8s created $ kubectl get pods NAME READY STATUS RESTARTS AGE gpu-k8s 1/1 Running 0 12s  3.1.3. nvidia-smi í™•ì¸ $ kubectl logs gpu-k8s Thu Jul 2 06:00:24 2020 +-----------------------------------------------------------------------------+ | NVIDIA-SMI 440.95.01 Driver Version: 440.95.01 CUDA Version: 10.2 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 108... Off | 00000000:86:00.0 Off | N/A | | 29% 30C P8 8W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ | 1 GeForce GTX 108... Off | 00000000:AF:00.0 Off | N/A | | 29% 31C P8 8W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | No running processes found | +-----------------------------------------------------------------------------+  3.2. 2ê°œì˜ Podë¥¼ ë„ì›Œì„œ gpu 4ê°œë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ê¸° gpu-k8s2.yaml ë§¤ë‹ˆíŒ¨ìŠ¤íŠ¸ íŒŒì¼ì„ í•˜ë‚˜ ë” ë§Œë“¤ì–´ì„œ ìœ„ì™€ ë™ì¼í•˜ê²Œ ì‹¤í–‰í•´ë³´ì.\n3.2.1. ê²°ê³¼ í™•ì¸ $ kubectl get pods NAME READY STATUS RESTARTS AGE gpu-k8s 1/1 Running 0 2m44s gpu-k8s2 1/1 Running 0 2  3.2.2. nvidia-smi í™•ì¸ $ kubectl logs gpu-k8s2 Thu Jul 2 06:03:06 2020 +-----------------------------------------------------------------------------+ | NVIDIA-SMI 440.95.01 Driver Version: 440.95.01 CUDA Version: 10.2 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 108... Off | 00000000:18:00.0 Off | N/A | | 29% 31C P8 7W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ | 1 GeForce GTX 108... Off | 00000000:3B:00.0 Off | N/A | | 29% 33C P8 8W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | No running processes found | +-----------------------------------------------------------------------------+  3.3. ì»¨í…Œì´ë„ˆê°€ ë…¸ë“œì˜ ëª¨ë“  GPUë¥¼ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´  requestì™€ limit ì„¤ì • ë¶€ë¶„ì„ ì—†ì• ì£¼ë©´ ëœë‹¤. íŠ¹ì´í•œ ì ì€ ì´ë¯¸ ë‹¤ë¥¸ íŒŒë“œì— GPUë¥¼ ëª¨ë‘ í• ë‹¹ í•´ì¤€ ìƒíƒœì—ì„œë„ íŒŒë“œ ìƒì„± ê°€ëŠ¥í•˜ë‹¤.  3.3.1. YAML íŒŒì¼ apiVersion: v1 kind: Pod metadata: name: gpu-all spec: containers: - name: gpu-container image: nvidia/cuda:9.0-runtime env: - name: DP_DISABLE_HEALTHCHECKS value: \u0026quot;xids\u0026quot; command: - \u0026quot;/bin/sh\u0026quot; - \u0026quot;-c\u0026quot; args: - nvidia-smi \u0026amp;\u0026amp; tail -f /dev/null  3.3.2. Pod ì‹¤í–‰ $ kubectl apply -f gpu-all.yaml pod/gpu-all created  3.3.3. í™•ì¸ $ kubectl get pods NAME READY STATUS RESTARTS AGE gpu-all 1/1 Running 0 50s gpu-k8s 1/1 Running 0 42m gpu-k8s2 1/1 Running 0 40m $ kubectl logs gpu-all Thu Jul 2 06:42:25 2020 +-----------------------------------------------------------------------------+ | NVIDIA-SMI 440.95.01 Driver Version: 440.95.01 CUDA Version: 10.2 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 108... Off | 00000000:18:00.0 Off | N/A | | 29% 32C P8 7W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ | 1 GeForce GTX 108... Off | 00000000:3B:00.0 Off | N/A | | 29% 33C P8 8W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ | 2 GeForce GTX 108... Off | 00000000:86:00.0 Off | N/A | | 29% 31C P8 8W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ | 3 GeForce GTX 108... Off | 00000000:AF:00.0 Off | N/A | | 29% 31C P8 8W / 250W | 0MiB / 11178MiB | 0% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | No running processes found | +-----------------------------------------------------------------------------+  ","id":2,"section":"posts","summary":"Intro Kubernetesì—ì„œ GPUë¥¼ ì‚¬ìš©í•˜ë„ë¡ í™˜ê²½ì„ êµ¬ì¶•í•˜ê³  ì‚¬ìš©í•´ë³´ì. ì‚¬ì „ ìš”êµ¬ ì‚¬í•­ ì•„ë˜ì˜ ë‚´ìš©ì´ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ì „ì œë¡œ ì§„í–‰í•˜ë¯€ë¡œ, ì•„ì§ ì¶©ì¡±ë˜ì§€ ì•Šì€","tags":["docker","kubernetes"],"title":"Kubernets(ì¿ ë²„ë„¤í‹°ìŠ¤) with GPU êµ¬ì¶•í•˜ê¸°","uri":"https://healinyoon.github.io/2020/10/20201023_kubernetes_with_gpu/","year":"2020"},{"content":"Intro íšŒì‚¬ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì—…ë¬´ë¥¼ í•˜ë‹¤ê°€ \u0026ldquo;ì»¨í…Œì´ë„ˆ ìœ„ì—ì„œë„ GPU ì„±ëŠ¥ì´ ë³´ì¥ë˜ëŠ”ê°€?\u0026ldquo;ë¼ëŠ” ì§ˆë¬¸ì´ ë‚˜ì™”ë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ìš´ì˜ ì¤‘ì— ìì£¼ ë§ˆì£¼í•˜ëŠ” ì§ˆë¬¸ì´ë¯€ë¡œ, ì´ë²ˆ ê¸°íšŒì— ì •ë¦¬ë¥¼ í•´ë³´ë ¤ê³  í•œë‹¤.\n1. Host vs Container GPU ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìš”ì•½ 1.1. ê²°ë¡  GPU on Host VS Containerë¥¼ ë¹„êµí•˜ì˜€ì„ ë•Œ ì†ë„ì˜ ì„±ëŠ¥ ì°¨ì´ê°€ ì—†ì—ˆìŒ\n1.2. ìƒì„¸ ë‚´ìš©  GPU Performance on Host VS Container ë¹„êµì‹œ ì •í™•ë„ì—ëŠ” ì°¨ì´ê°€(ëª¨ë¸ì´ ê°™ìœ¼ë¯€ë¡œ) ì—†ìœ¼ë¯€ë¡œ, ì†ë„ë§Œ ë¹„êµí•˜ì˜€ë‹¤. GPUë¥¼ 1ê°œ ì‚¬ìš©í•˜ì˜€ì„ ê²½ìš°ì™€ 2ê°œ ì‚¬ìš©í•˜ì˜€ì„ ê²½ìš°ë¥¼ ë‚˜ëˆ„ì–´ ë¹„êµí•˜ì˜€ë‹¤. ë™ì¼í•œ ì¡°ê±´ì— ëŒ€í•´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤(íšŸìˆ˜)ë¥¼ ì´ 2íšŒì”© ìˆ˜í–‰í•˜ì˜€ë‹¤.  2. GPU ì„±ëŠ¥ ë¹„êµë¥¼ ìœ„í•œ Host í™˜ê²½ ì„¤ì • 2.1. ê°€ìƒí™˜ê²½ ìƒì„± # pip3 install virtualenv # virtualenv /home/rin_gu/PerformTestEnv/performTestEnv  2.2. Tensorflow ì„¤ì¹˜ # source /home/rin_gu/PerformanceTest/performTestEnv/bin/activate # python -m pip install --upgrade pip # sudo -H pip install --upgrade tf-nightly-gpu  2.3. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ # source /home/rin_gu/PerformanceTest/performTestEnv/bin/activate # cd /home/rin_gu/PerformanceTest/ # git clone https://github.com/tensorflow/benchmarks.git # cd benchmarks  3. GPU ì„±ëŠ¥ ë¹„êµë¥¼ ìœ„í•œ Container í™˜ê²½ ì„¤ì • 3.1. ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ root@ubuntu:~# docker pull tensorflow/tensorflow:nightly-gpu  3.2. ì»¨í…Œì´ë„ˆ run with GPU root@ubuntu:~# docker container run -d --gpus all -it tensorflow/tensorflow:nightly-gpu 94515f052adbddf25bb9c66e5d5d7ee6a6010cfc74c6936f3b01bdf764202488  3.3. ì»¨í…Œì´ë„ˆ ì ‘ì† root@ubuntu:~# docker exec -it 94515f052adb /bin/bash \u0026quot;docker exec\u0026quot; requires at least 2 arguments. See 'docker exec --help'. Usage: docker exec [OPTIONS] CONTAINER COMMAND [ARG...] Run a command in a running container root@ubuntu:~# docker container exec -it 94515f052adb /bin/bash ________ _______________ ___ __/__________________________________ ____/__ /________ __ __ / _ _ \\_ __ \\_ ___/ __ \\_ ___/_ /_ __ /_ __ \\_ | /| / / _ / / __/ / / /(__ )/ /_/ / / _ __/ _ / / /_/ /_ |/ |/ / /_/ \\___//_/ /_//____/ \\____//_/ /_/ /_/ \\____/____/|__/ WARNING: You are running this container as root, which can cause new files in mounted volumes to be created as the root user on your host machine. To avoid this, run the container by specifying your user's userid: $ docker run -u $(id -u):$(id -g) args...  3.4. íŒŒì´ì¬ ë²„ì „ í™•ì¸ root@282efcfdc3c8:/# python Python 3.6.9 (default, Apr 18 2020, 01:56:04) [GCC 8.4.0] on linux Type \u0026quot;help\u0026quot;, \u0026quot;copyright\u0026quot;, \u0026quot;credits\u0026quot; or \u0026quot;license\u0026quot; for more information. \u0026gt;\u0026gt;\u0026gt; import tensorflow as tf 2020-06-22 11:16:19.882107: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudart.so.10.1 \u0026gt;\u0026gt;\u0026gt; tf.__version__ '2.3.0-dev20200621'  3.5. git ì„¤ì¹˜ / ë¦¬í¬ì§€í† ë¦¬ ë‹¤ìš´ë¡œë“œ root@94515f052adb:/# apt-get install git root@94515f052adb:/# git clone https://github.com/tensorflow/benchmarks.git  4. Host vs Container ì„±ëŠ¥ ë¹„êµ 4.1. GPU 1ê°œ ì‚¬ìš© (performTestEnv) # CUDA_VISIBLE_DEVICES={GPU ë””ë°”ì´ìŠ¤} python tf_cnn_benchmarks.py --num_gpus=1 --batch_size={ë°°ì¹˜ì‚¬ì´ì¦ˆ} --model={ëª¨ë¸ëª…} --variable_update=parameter_server     í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤(íšŸìˆ˜) Host images/sec Container images/sec ë¹„ê³      1 124.77 126.95 model: Resnet50   2 125.76 125.07 model: Resnet50    4.2. GPU 2ê°œ ì‚¬ìš© (performTestEnv) # CUDA_VISIBLE_DEVICES={GPU ë””ë°”ì´ìŠ¤1, GPU ë””ë°”ì´ìŠ¤2} python tf_cnn_benchmarks.py --num_gpus=2 --batch_size={ë°°ì¹˜ì‚¬ì´ì¦ˆ} --model={ëª¨ë¸ëª…} --variable_update=parameter_server     í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤(íšŸìˆ˜) Host images/sec Container images/sec ë¹„ê³      1 242.60 240.64 model: Resnet50   2 241.52 236.72 model: Resnet50    5. GPU ì„±ëŠ¥ ì¸¡ì • ìƒì„¸ - Host 5.1. í…ŒìŠ¤íŠ¸ 1 5.1.1. ì¡°ê±´ (performTestEnv) # CUDA_VISIBLE_DEVICES=3 python tf_cnn_benchmarks.py --num_gpus=1 --batch_size=64 --model=resnet50 --variable_update=parameter_server (ì¤‘ëµ) Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 13968 MB memory) -\u0026gt; physical GPU (device: 0, name: Tesla T4, pci bus id: 0000:d8:00.0, compute capability: 7.5) TensorFlow: 2.3 Model: resnet50 Dataset: imagenet (synthetic) Mode: training SingleSess: False Batch size: 64 global 64 per device Num batches: 100 Num epochs: 0.00 Devices: ['/gpu:0'] // GPU 1ê°œ ì‚¬ìš© NUMA bind: False Data format: NCHW Optimizer: sgd Variables: parameter_server  5.1.2. ê²°ê³¼ Done warm up Step\tImg/sec\ttotal_loss 1\timages/sec: 127.9 +/- 0.0 (jitter = 0.0)\t7.608 10\timages/sec: 126.4 +/- 0.2 (jitter = 0.4)\t7.849 20\timages/sec: 126.3 +/- 0.1 (jitter = 0.5)\t8.013 30\timages/sec: 126.2 +/- 0.1 (jitter = 0.7)\t7.940 40\timages/sec: 126.0 +/- 0.1 (jitter = 0.7)\t8.137 50\timages/sec: 125.8 +/- 0.1 (jitter = 0.6)\t8.052 60\timages/sec: 125.6 +/- 0.1 (jitter = 0.7)\t7.782 70\timages/sec: 125.4 +/- 0.1 (jitter = 0.9)\t7.856 80\timages/sec: 125.3 +/- 0.1 (jitter = 1.0)\t8.011 90\timages/sec: 125.1 +/- 0.1 (jitter = 1.2)\t7.843 100\timages/sec: 124.8 +/- 0.1 (jitter = 1.4)\t8.090 ---------------------------------------------------------------- total images/sec: 124.77 ----------------------------------------------------------------  5.2. í…ŒìŠ¤íŠ¸ 2 5.2.1. ì¡°ê±´ (performTestEnv) # CUDA_VISIBLE_DEVICES=2,3 python tf_cnn_benchmarks.py --num_gpus=2 --batch_size=64 --model=resnet50 --variable_update=parameter_server (ì¤‘ëŸ‰) Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 13968 MB memory) -\u0026gt; physical GPU (device: 1, name: Tesla T4, pci bus id: 0000:d8:00.0, compute capability: 7.5) TensorFlow: 2.3 Model: resnet50 Dataset: imagenet (synthetic) Mode: training SingleSess: False Batch size: 128 global 64 per device Num batches: 100 Num epochs: 0.01 Devices: ['/gpu:0', '/gpu:1'] // GPU 2ê°œ ì‚¬ìš© NUMA bind: False Data format: NCHW Optimizer: sgd Variables: parameter_server  5.2.2. ê²°ê³¼ Done warm up Step\tImg/sec\ttotal_loss 1\timages/sec: 246.2 +/- 0.0 (jitter = 0.0)\t7.749 10\timages/sec: 244.9 +/- 0.6 (jitter = 1.7)\t7.892 20\timages/sec: 244.3 +/- 0.4 (jitter = 2.6)\t7.968 30\timages/sec: 244.5 +/- 0.4 (jitter = 2.3)\t7.934 40\timages/sec: 244.2 +/- 0.3 (jitter = 2.6)\t8.016 50\timages/sec: 243.8 +/- 0.3 (jitter = 2.6)\t7.922 60\timages/sec: 243.6 +/- 0.3 (jitter = 2.0)\t7.872 70\timages/sec: 243.5 +/- 0.2 (jitter = 1.9)\t7.837 80\timages/sec: 243.3 +/- 0.2 (jitter = 1.8)\t7.850 90\timages/sec: 243.0 +/- 0.2 (jitter = 2.1)\t7.859 100\timages/sec: 242.7 +/- 0.2 (jitter = 2.2)\t7.946 ---------------------------------------------------------------- total images/sec: 242.60 ----------------------------------------------------------------  6. GPU ì„±ëŠ¥ ì¸¡ì • ìƒì„¸ - Container 6.1. í…ŒìŠ¤íŠ¸ 1 6.1.1. ì¡°ê±´ root@94515f052adb:# CUDA_VISIBLE_DEVICES=3 python tf_cnn_benchmarks.py --num_gpus=1 --batch_size=64 --model=resnet50 --variable_update=parameter_server (ì¤‘ëµ) Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 13968 MB memory) -\u0026gt; physical GPU (device: 0, name: Tesla T4, pci bus id: 0000:d8:00.0, compute capability: 7.5) TensorFlow: 2.3 Model: resnet50 Dataset: imagenet (synthetic) Mode: training SingleSess: False Batch size: 64 global 64 per device Num batches: 100 Num epochs: 0.00 Devices: ['/gpu:0'] // GPU 1ê°œ ì‚¬ìš© NUMA bind: False Data format: NCHW Optimizer: sgd Variables: parameter_server  6.1.2. ê²°ê³¼ Done warm up Step\tImg/sec\ttotal_loss 1\timages/sec: 129.2 +/- 0.0 (jitter = 0.0)\t7.608 10\timages/sec: 128.7 +/- 0.4 (jitter = 0.9)\t7.849 20\timages/sec: 128.4 +/- 0.2 (jitter = 1.1)\t8.013 30\timages/sec: 128.4 +/- 0.2 (jitter = 0.8)\t7.940 40\timages/sec: 128.3 +/- 0.1 (jitter = 0.9)\t8.136 50\timages/sec: 128.1 +/- 0.1 (jitter = 0.9)\t8.053 60\timages/sec: 127.9 +/- 0.1 (jitter = 1.1)\t7.784 70\timages/sec: 127.7 +/- 0.1 (jitter = 1.4)\t7.859 80\timages/sec: 127.5 +/- 0.1 (jitter = 1.4)\t8.014 90\timages/sec: 127.3 +/- 0.1 (jitter = 1.4)\t7.842 100\timages/sec: 127.1 +/- 0.1 (jitter = 1.4)\t8.090 ---------------------------------------------------------------- total images/sec: 126.95 ----------------------------------------------------------------  6.2. í…ŒìŠ¤íŠ¸ 2 6.2.1. ì¡°ê±´ root@94515f052adb:# CUDA_VISIBLE_DEVICES=2,3 python tf_cnn_benchmarks.py --num_gpus=2 --batch_size=64 --model=resnet50 --variable_update=parameter_server (ì¤‘ëµ) Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 13968 MB memory) -\u0026gt; physical GPU (device: 1, name: Tesla T4, pci bus id: 0000:d8:00.0, compute capability: 7.5) TensorFlow: 2.3 Model: resnet50 Dataset: imagenet (synthetic) Mode: training SingleSess: False Batch size: 128 global 64 per device Num batches: 100 Num epochs: 0.01 Devices: ['/gpu:0', '/gpu:1'] // GPU 2ê°œ ì‚¬ìš© NUMA bind: False Data format: NCHW Optimizer: sgd Variables: parameter_server  6.2.2. ê²°ê³¼ Done warm up Step\tImg/sec\ttotal_loss 1\timages/sec: 240.6 +/- 0.0 (jitter = 0.0)\t7.749 10\timages/sec: 243.4 +/- 0.8 (jitter = 3.5)\t7.892 20\timages/sec: 243.3 +/- 0.5 (jitter = 2.7)\t7.968 30\timages/sec: 243.1 +/- 0.4 (jitter = 2.8)\t7.934 40\timages/sec: 242.6 +/- 0.3 (jitter = 2.3)\t8.019 50\timages/sec: 242.4 +/- 0.3 (jitter = 2.0)\t7.923 60\timages/sec: 242.1 +/- 0.3 (jitter = 1.8)\t7.878 70\timages/sec: 241.8 +/- 0.2 (jitter = 1.6)\t7.834 80\timages/sec: 241.5 +/- 0.2 (jitter = 1.6)\t7.861 90\timages/sec: 241.1 +/- 0.2 (jitter = 2.0)\t7.852 100\timages/sec: 240.8 +/- 0.3 (jitter = 2.1)\t7.948 ---------------------------------------------------------------- total images/sec: 240.64 ----------------------------------------------------------------  ","id":3,"section":"posts","summary":"Intro íšŒì‚¬ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì—…ë¬´ë¥¼ í•˜ë‹¤ê°€ \u0026ldquo;ì»¨í…Œì´ë„ˆ ìœ„ì—ì„œë„ GPU ì„±ëŠ¥ì´ ë³´ì¥ë˜ëŠ”ê°€?\u0026ldquo;ë¼ëŠ” ì§ˆë¬¸ì´ ë‚˜ì™”ë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ìš´ì˜ ì¤‘ì— ìì£¼ ë§ˆì£¼","tags":["docker"],"title":"GPU ì„±ëŠ¥ ë¹„êµí•˜ê¸°: Host vs Container(+Containerì—ì„œ GPU ì‚¬ìš©í•˜ê¸°)","uri":"https://healinyoon.github.io/2020/10/20201023_gpu_performance_host_vs_container/","year":"2020"},{"content":"ë°°ê²½ íšŒì‚¬ì—ì„œ Kubernetesë¥¼ ìš´ì˜í•˜ë‹¤ë³´ë©´ í´ëŸ¬ìŠ¤í„°ì— ìƒˆë¡œìš´ worker nodeë¥¼ ì¶”ê°€í•´ì•¼í•˜ëŠ” ì¼ì´ ì¢…ì¢… ìƒê¹ë‹ˆë‹¤.\në¬¸ì œëŠ” apt-get ë“± ê¸°ë³¸ íŒ¨í‚¤ì§€ ê´€ë¦¬ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒê° ì—†ì´ ì„¤ì¹˜í•˜ë©´ ê¸°ì¡´ì— ìš´ì˜í•˜ë˜ k8s í´ëŸ¬ìŠ¤í„° ë²„ì „ê³¼ ë§ì§€ ì•Šì€ ìµœì‹  ë²„ì „ì´ ì„¤ì¹˜ ëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤\u0026hellip;(ê·¸ëŸ¬ë©´ ì €ì²˜ëŸ¼ ì‘ì—…ì„ 2ë²ˆ í•˜ê²Œ ë©ë‹ˆë‹¤)\nê·¸ëŸ°ë° ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ì‚¬ìš©í•´ì„œ ì„¤ì¹˜í•˜ê¸°ëŠ” ë˜ ê·€ì°®ê³ ..\në”°ë¼ì„œ aptë¥¼ ì‚¬ìš©í•˜ë˜, ë²„ì „ì„ ì˜µì…˜ìœ¼ë¡œ ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ì¹˜ë¥¼ í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.\në‚˜ì¤‘ì— ë˜ 2ë²ˆ ì‘ì—…í•˜ì§€ ì•Šê¸° ìœ„í•´ì„œ, ê·¸ë¦¬ê³  ì¤‘ê°„ì— ë°œìƒí•œ ì´ìŠˆë„ ê¸°ë¡í•´ë‘˜ê²¸ ë‚´ìš©ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.\nì„¤ì¹˜í•˜ê¸° ì‚¬ì‹¤ ê¸°ì¡´ k8s í´ëŸ¬ìŠ¤í„° ì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ì™€ ë‹¤ë¥¸ ì ì€ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ì¡´ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ì—¬ê¸°ë¥¼ ì°¸ê³  ë°”ëë‹ˆë‹¤.\níŠ¹ì • ë²„ì „ ì„¤ì¹˜ ì˜µì…˜ì„ ì£¼ëŠ” ë¶€ë¶„ë§Œ ì‹ ê²½ì¨ì„œ ì§„í–‰í•˜ë©´ ë©ë‹ˆë‹¤.\n# cat \u0026lt;\u0026lt;EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list deb https://apt.kubernetes.io/ kubernetes-xenial main EOF sudo apt-get update sudo apt-get install -y kubelet kubeadm kubectl // íŒ¨í‚¤ì§€ê°€ ìë™ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ ë˜ì§€ ì•Šë„ë¡ ì„¤ì • sudo apt-mark hold kubelet kubeadm kubectl  ì›ë˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ê·¸ëƒ¥ ìµœì‹  ë²„ì „ì„ ì„¤ì¹˜í–ˆë‹¤ë©´ ì´ë²ˆì—” ì˜µì…˜ìœ¼ë¡œ ë²„ì „ì„ ì¤˜ì•¼ í•©ë‹ˆë‹¤. sudo apt-get install -y kubelet kubeadm kubectl  ìš´ì˜ ì¤‘ì¸ í´ëŸ¬ìŠ¤í„°ì˜ ë²„ì „ í™•ì¸í•˜ê¸° ë¨¼ì € ê¸°ì¡´ì— ìš´ì˜ ì¤‘ì¸ k8s í´ëŸ¬ìŠ¤í„°ì˜ ë²„ì „ì„ í™•ì¸í•©ë‹ˆë‹¤.\nroot@hci-k8s-master-01:~# kubectl get nodes NAME STATUS ROLES AGE VERSION k8s-worker-01 Ready \u0026lt;none\u0026gt; 74d v1.18.8 k8s-worker-02 Ready \u0026lt;none\u0026gt; 74d v1.18.8 k8s-master-01 Ready master 76d v1.18.6  í´ëŸ¬ìŠ¤í„°ì˜ nodeë“¤ì€ 1.18.x ë²„ì „ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në²„ì „ì„ í™•ì¸í–ˆìœ¼ë‹ˆ ì´ì œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.\nì„¤ì¹˜ ê°€ëŠ¥í•œ ë²„ì „ í™•ì¸í•˜ê¸° ì €ëŠ” sudo apt-get install -y kubelet=1.18.8 ì´ë ‡ê²Œ ì˜µì…˜ì„ ì£¼ê³  ì„¤ì¹˜í•˜ë ¤ê³  í–ˆëŠ”ë°, ì• ì„í•˜ê²Œë„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\nì•„ë˜ì™€ ê°™ì€ ë¡œê·¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.\n# sudo apt-get install kubelet=1.18.8 Reading package lists... Done Building dependency tree Reading state information... Done E: Version '1.18.8' for 'kubelet' was not found  ì •í™•í•œ ë²„ì „ ì˜µì…˜ì„ í™•ì¸í•´ë³´ë„ë¡ í•©ë‹ˆë‹¤.\n# apt-cache madison kubeadm  ì¶œë ¥ ê²°ê³¼ì— ì œê°€ ì‚¬ìš©í•˜ë ¤ë˜ 1.18.8 ë²„ì „ì€ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤.\nkubeadm | 1.18.8-00 | https://apt.kubernetes.io kubernetes-xenial/main amd64 Packages  1.18.8-00 ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸° ì´ì œ ë‹¤ì‹œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•´ë´…ë‹ˆë‹¤.\nì›ë˜ kubeadmë§Œ ì„¤ì¹˜í•´ë„ kubectlê³¼ kubeletì´ ì˜ì¡´ì ìœ¼ë¡œ ì„¤ì¹˜ë©ë‹ˆë‹¤.\nê·¸ëŸ°ë° ë§ì…ë‹ˆë‹¤\u0026hellip; íŠ¹ì´ì ì´ ë°œìƒí•©ë‹ˆë‹¤.\n# sudo apt-get install kubeadm=1.18.8-00 Reading package lists... Done Building dependency tree Reading state information... Done The following additional packages will be installed: kubectl The following NEW packages will be installed: kubeadm kubectl 0 upgraded, 2 newly installed, 0 to remove and 5 not upgraded. Need to get 0 B/16.5 MB of archives. After this operation, 82.8 MB of additional disk space will be used. Do you want to continue? [Y/n] Y Selecting previously unselected package kubectl. (Reading database ... 128167 files and directories currently installed.) Preparing to unpack .../kubectl_1.19.2-00_amd64.deb ... Unpacking kubectl (1.19.2-00) ... Selecting previously unselected package kubeadm. Preparing to unpack .../kubeadm_1.18.8-00_amd64.deb ... Unpacking kubeadm (1.18.8-00) ... Setting up kubectl (1.19.2-00) ... Setting up kubeadm (1.18.8-00) ...  ìœ„ì™€ ê°™ì´ kubectlì´ 1.19.2-00 ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜ê°€ ë©ë‹ˆë‹¤.\nì´ëŸ° ê²½ìš°, kubectlì„ downgrade í•´ì£¼ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ..\n# apt-get install kubectl=1.18.8-00  ì• ì´ˆì— ì²˜ìŒë¶€í„° ëª¨ë‘ ë²„ì „ì„ ì§€ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.\n# sudo apt-get install -y kubelet=1.18.8-00 kubeadm=1.18.8-00 kubectl=1.18.8-00  Masterì— joiní•˜ê¸° ì°¸ê³ ì™€ ë™ì¼í•˜ê²Œ ì§„í–‰í•©ë‹ˆë‹¤.\n","id":4,"section":"posts","summary":"ë°°ê²½ íšŒì‚¬ì—ì„œ Kubernetesë¥¼ ìš´ì˜í•˜ë‹¤ë³´ë©´ í´ëŸ¬ìŠ¤í„°ì— ìƒˆë¡œìš´ worker nodeë¥¼ ì¶”ê°€í•´ì•¼í•˜ëŠ” ì¼ì´ ì¢…ì¢… ìƒê¹ë‹ˆë‹¤. ë¬¸ì œëŠ” apt-get ë“± ê¸°ë³¸ íŒ¨í‚¤ì§€ ê´€ë¦¬ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜","tags":["kubernetes"],"title":"Kuberenets íŠ¹ì • ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸°","uri":"https://healinyoon.github.io/2020/10/20201009_k8s_install_specific_version/","year":"2020"},{"content":"Azure CLIë¥¼ virtualenv í™˜ê²½ì—ì„œ ì„¤ì¹˜í•˜ê¸° Host ì„œë²„ì— ê·¸ëƒ¥ ì„¤ì¹˜í•˜ë©´ íŒŒì´ì¬ ë²„ì „ ë¬¸ì œë¡œ ì‹¤í–‰ì´ ì•ˆë  ìˆ˜ ìˆë‹¤. virtualenv ë¥¼ ì„¤ì¹˜í•˜ê³  az cli ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì´ë‹¤.\n$ pip install virtualenv $ mkdir azure-cli-with-python3 $ which python3 $ cd azure-cli-with-python3 $ virtualenv -p /usr/bin/python3.5. $ source ./bin/activate $ sudo apt install python3-dev $ pip install azure-cli $ python --version  ref)  The way to configure Azure CLI to use Python 3.5 on system where the default Python version is 2.x Â· Issue #2529 Â· Azure/azure-cli  ","id":5,"section":"posts","summary":"Azure CLIë¥¼ virtualenv í™˜ê²½ì—ì„œ ì„¤ì¹˜í•˜ê¸° Host ì„œë²„ì— ê·¸ëƒ¥ ì„¤ì¹˜í•˜ë©´ íŒŒì´ì¬ ë²„ì „ ë¬¸ì œë¡œ ì‹¤í–‰ì´ ì•ˆë  ìˆ˜ ìˆë‹¤. virtualenv ë¥¼ ì„¤ì¹˜í•˜ê³  az cli ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì´ë‹¤. $ pip install virtualenv $ mkdir azure-cli-with-python3 $ which python3 $","tags":["azure"],"title":"Azure CLI ì„¤ì¹˜í•˜ê¸° with virtualenv","uri":"https://healinyoon.github.io/2020/09/20201023_azure_cli_with_virtualenv/","year":"2020"},{"content":"Kubernetes Cluster ì„¤ì¹˜í•˜ê¸° ì´ í˜ì´ì§€ì—ì„œëŠ” ubuntu18.04ì— kubeadm toolì„ ì„¤ì¹˜í•˜ê³  ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ kubernetes clusterë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.\nêµ¬ì„± H/W êµ¬ì„±í•˜ë ¤ëŠ” kubernetes clusterëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n   ë…¸ë“œ vCPU RAM Disk     master01 2 8GiB    worker01 2 8GiB    worker02 2 8GiB     Required ports 1) Control-plane node(s)\n2) Worker node(s)\nDocker ì„¤ì¹˜(ëª¨ë“  node) # curl -fsSL https://get.docker.com/ | sudo sh # systemctl start docker # systemctl enable docker  Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„± ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ ì‚¬ì´íŠ¸ kubeam ì„¤ì¹˜\nëª¨ë“  ë…¸ë“œì— ì•„ë˜ì˜ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤.\n kubeadm: í´ëŸ¬ìŠ¤í„°ë¥¼ ë¶€íŠ¸ìŠ¤íŠ¸ë©í•˜ëŠ” ëª…ë ¹(ì¿ ë²„ë„¤í‹°ìŠ¤ ê´€ë¦¬) kubelet: í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ì‹œìŠ¤í…œì—ì„œ ì‹¤í–‰ë˜ëŠ” êµ¬ì„± ìš”ì†Œë¡œ, í¬íŠ¸ ë° ì»¨í…Œì´ë„ˆ ì‹œì‘ê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰(ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤) kubectl: í´ëŸ¬ìŠ¤í„°ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ command line util(ì¿ ë²„ë„¤í‹°ìŠ¤ í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨, í´ëŸ¬ìŠ¤í„° êµ¬ì„±ê³¼ëŠ” ì „í˜€ ìƒê´€ ì—†ìŒ)  1) Kubernetes ë¦¬í¬ì§€í† ë¦¬ êµ¬ì„±(ëª¨ë“  node) # sudo apt-get update \u0026amp;\u0026amp; sudo apt-get install -y apt-transport-https curl curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -  2) Kubeadm, Kubelet, Kubectl ì„¤ì¹˜(ëª¨ë“  node) # cat \u0026lt;\u0026lt;EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list deb https://apt.kubernetes.io/ kubernetes-xenial main EOF sudo apt-get update sudo apt-get install -y kubelet kubeadm kubectl // íŒ¨í‚¤ì§€ê°€ ìë™ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ ë˜ì§€ ì•Šë„ë¡ ì„¤ì • sudo apt-mark hold kubelet kubeadm kubectl // ë°ëª¬ ì¬ì‹œì‘ systemctl daemon-reload systemctl restart kubelet  3) hostname ë“±ë¡(ëª¨ë“  node) # sudo hostnamectl set-hostname master01 ë˜ëŠ” # sudo hostnamectl set-hostname worker01  4) /etc/hosts íŒŒì¼ ìˆ˜ì •(ëª¨ë“  node) # vi /etc/hosts ì•„ë˜ì— ì¶”ê°€ {IP} master01 {IP} worker01 {IP} worker02  5) Iptables ì„¤ì •(ëª¨ë“  node) ë¸Œë¦¿ì§€ ë˜ì–´ìˆëŠ” IPv4 íŠ¸ë˜í”½ì„ iptables ì²´ì¸ìœ¼ë¡œ ì „ë‹¬ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤.\n# cat \u0026lt;\u0026lt;EOF | sudo tee /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 EOF # sudo sysctl --system  6) ìŠ¤ì™‘ ê¸°ëŠ¥ ë¹„í™œì„±í™”(ëª¨ë“  node) swap ë„ê¸° # sudo swapoff -a ì¬ë¶€íŒ… í›„ì—ë„ swap ì„¤ì • ìœ ì§€ # sudo sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab  7) ë§ˆìŠ¤í„° ë…¸ë“œ ì´ˆê¸°í™” # kubeadm init  kubeadm init ëª…ë ¹ì–´ ì‹¤í–‰ì‹œ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥ëœë‹¤.\nTo start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config You should now deploy a pod network to the cluster. Run \u0026quot;kubectl apply -f [podnetwork].yaml\u0026quot; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ Then you can join any number of worker nodes by running the following on each as root: kubeadm join 10.1.11.4:6443 --token xxxxxxxxxxxxxxxxxxxxxxx \\ --discovery-token-ca-cert-hash sha256:e184c470296359bc4a35bc57624b03d8c4b3eb2bd46f413f3a68a86f182c9844  master nodeì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³ \n$ mkdir -p $HOME/.kube $ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config $ sudo chown $(id -u):$(id -g) $HOME/.kube/config  worker nodeì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ master nodeì™€ joiní•œë‹¤.\nkubeadm join 10.1.11.4:6443 --token xxxxxxxxxxxxxxxxxxxxxxx \\ --discovery-token-ca-cert-hash sha256:e184c470296359bc4a35bc57624b03d8c4b3eb2bd46f413f3a68a86f182c9844  master nodeì—ì„œ kubectl get nodes ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì¶œë ¥ëœë‹¤.\n# kubectl get nodes NAME STATUS ROLES AGE VERSION healin-k8s-master01 NotReady master 10m v1.19.0 healin-k8s-worker01 NotReady \u0026lt;none\u0026gt; 30s v1.19.0 healin-k8s-worker02 NotReady \u0026lt;none\u0026gt; 29s v1.19.0  8) ë„¤íŠ¸ì›Œí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì¹˜ pod ë„¤íŠ¸ì›Œí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì¹˜í•´ì•¼ í´ëŸ¬ìŠ¤í„° ë‚´ì˜ nodeê°„ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.\nì‚¬ìš© ê°€ëŠ¥í•œ ë„¤íŠ¸ì›Œí¬ ì˜µì…˜ì€ ì—¬ê¸°ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\në‹¤ìŒ ëª…ë ¹ì„ master nodeì—ì„œ ìˆ˜í–‰í•˜ì—¬ weave pod ë„¤íŠ¸ì›Œí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì¹˜í•œë‹¤.\nkubectl apply -f \u0026quot;https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d '\\n')\u0026quot; ì´ëŸ° ì˜¤ë¥˜ ë°œìƒì‹œ The connection to the server localhost:8080 was refused - did you specify the right host or port? export KUBECONFIG=/etc/kubernetes/admin.conf ì„ ì ìš©í•´ë³´ì  master nodeì—ì„œ kubectl get nodes ëª…ë ¹ì–´ë¥¼ ì ì‹œ í›„ ë‹¤ì‹œ ì…ë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ STATUSê°€ NotReady =\u0026gt; Readyë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n# kubectl get nodes NAME STATUS ROLES AGE VERSION healin-k8s-master01 Ready master 17m v1.19.0 healin-k8s-worker01 Ready \u0026lt;none\u0026gt; 7m42s v1.19.0 healin-k8s-worker02 Ready \u0026lt;none\u0026gt; 7m41s v1.19.0  9) master nodeë¥¼ worker nodeë¡œë„ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ control-plane ë…¸ë“œëŠ” ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ê²©ë¦¬ë˜ì–´ ìˆë‹¤(ê¸°ë³¸ê°’).\nmaster nodeì—ì„œëŠ” pod ê°€ ìŠ¤ì¼€ì¤„ë§ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, 1ëŒ€ì˜ ë¨¸ì‹ ìœ¼ë¡œë§Œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•  ê²½ìš° ê²©ë¦¬ í•´ì œí•´ì•¼ í•œë‹¤.\n$ kubectl taint nodes â€“all node-role.kubernetes.io/master-  Control plane node isolationì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ê²½ë¡œë¥¼ ì°¸ê³ í•œë‹¤.\n* ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ ë¬¸ì„œ - Control plane node isolation\n* Kubernetes Control-Plane Nodeì— Pod ë„ìš¸ìˆ˜ ìˆëŠ” ë°©ë²• (Taints)\nì°¸ê³  ì¿ ë²„ë„¤í‹°ìŠ¤(kubernetes) ì„¤ì¹˜ ë° í™˜ê²½ êµ¬ì„±í•˜ê¸°\n","id":6,"section":"posts","summary":"Kubernetes Cluster ì„¤ì¹˜í•˜ê¸° ì´ í˜ì´ì§€ì—ì„œëŠ” ubuntu18.04ì— kubeadm toolì„ ì„¤ì¹˜í•˜ê³  ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ kubernetes clusterë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. êµ¬ì„± H/W êµ¬ì„±í•˜","tags":["docker","kubernetes"],"title":"Kubernetes Cluster ì„¤ì¹˜í•˜ê¸°(ubuntu18.04)","uri":"https://healinyoon.github.io/2020/09/20200828_install_kubernetes_cluster_ubuntu/","year":"2020"},{"content":"Pod Network pod networkê°€ í—·ê°ˆë ¤ì„œ ì •ë¦¬ìš©ìœ¼ë¡œ ë§Œë“  í˜ì´ì§€\nê³µì‹ ì‚¬ì´íŠ¸ì˜ ì„¤ëª…: Installing a Pod network add-on\n","id":7,"section":"posts","summary":"Pod Network pod networkê°€ í—·ê°ˆë ¤ì„œ ì •ë¦¬ìš©ìœ¼ë¡œ ë§Œë“  í˜ì´ì§€ ê³µì‹ ì‚¬ì´íŠ¸ì˜ ì„¤ëª…: Installing a Pod network add-on","tags":["kubernetes"],"title":"ì¿ ë²„ë„¤í‹°ìŠ¤ POD Network","uri":"https://healinyoon.github.io/2020/09/%EB%AF%B8%EC%99%8420200901_k8s_pod_network/","year":"2020"},{"content":"ëª©ì  Jenkins node heap memory ì‚¬ì´ì¦ˆ ë³€ê²½ ë°©ë²• ì •ë¦¬\nì°¸ê³  ìë£Œ  Java Memory Management for Java Virtual Machine (JVM) Java Platform, Standard Edition HotSpot Virtual Machine Garbage Collection Tuning Guide CloudBees Jenkins JVM troubleshooting Jenkins ê¶Œì¥ ì‚¬ì–‘  Jenkins Heap Memory ì˜µì…˜ Jenkinsì—ì„œëŠ” ë‹¤ì–‘í•œ JAVA ì˜µì…˜ì„ ì¸ìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆìŒ\nJenkins node heap memory ì‚¬ì´ì¦ˆë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•œ ì¸ìˆ˜: -Xmxì™€ -Xms\n-Xms\u0026lt;size\u0026gt; set initial Java heap size -Xmx\u0026lt;size\u0026gt; set maximum Java heap size  ì˜ˆì‹œ 1) masterì˜ /etc/default/jenkinsì—ì„œ ì„¤ì • AVA_ARGS=\u0026quot;-Xmx256m\u0026quot; # default value JAVA_ARGS=\u0026quot;-Xmx2048m\u0026quot; # 2048MB size  2) Jenkins UIì—ì„œ slave ì„¤ì • [Jenkins ê´€ë¦¬] \u0026gt; [ë…¸ë“œ ê´€ë¦¬] \u0026gt; \u0026lsquo;ë…¸ë“œ ì„ íƒ í›„ ' [ì„¤ì •] \u0026gt; [ê³ ê¸‰] Jenkins ê¶Œì¥ ì‚¬ì–‘(ìì„¸íˆ) ì°¸ê³   It is recommended to define the same value for both -Xms and -Xmx so that the memory is allocated on startup rather than runtime. ëŒ€/ì†Œë¬¸ìëŠ” ìƒê´€ ì—†ìŒ(ì˜ˆ: -Xmx10GëŠ” -Xmx10gì™€ ë™ì¼í•¨) Java processes ì „ì—­ì— ì ìš©í•˜ê³  ì‹¶ìœ¼ë©´ JAVA_TOOL_OPTIONS í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©(ì˜ˆ: export JAVA_TOOL_OPTIONS=\u0026quot;-Xmx6g\u0026quot;)  ","id":8,"section":"posts","summary":"ëª©ì  Jenkins node heap memory ì‚¬ì´ì¦ˆ ë³€ê²½ ë°©ë²• ì •ë¦¬ ì°¸ê³  ìë£Œ Java Memory Management for Java Virtual Machine (JVM) Java Platform, Standard Edition HotSpot Virtual Machine Garbage Collection Tuning Guide CloudBees Jenkins JVM troubleshooting Jenkins ê¶Œì¥ ì‚¬ì–‘ Jenkins Heap Memory ì˜µì…˜ Jenkinsì—ì„œëŠ” ë‹¤ì–‘í•œ JAVA ì˜µì…˜ì„ ì¸","tags":["jenkins"],"title":"Jenkins Node Heap Memory ì‚¬ì´ì¦ˆ ì„¤ì •í•˜ê¸°(-Xmx/-Xms ì˜µì…˜)","uri":"https://healinyoon.github.io/2020/08/20200831_jenkins_node_heap_size/","year":"2020"},{"content":"Jenkins Master-Slave JenkinsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¨ì¼ ì„œë²„ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë‹¨ì¼ ì„œë²„ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì„ ì¶©ì¡±í•˜ê¸° ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n ë¹Œë“œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ í™˜ê²½ì´ í•„ìš”í•œ ê²½ìš° í¬ê³  ë¬´ê±°ìš´ í”„ë¡œì íŠ¸ì˜ ì‘ì—… ë¶€í•˜ë¥¼ ë¶„ì‚°í•´ì•¼í•˜ëŠ” ê²½ìš°  ìœ„ì˜ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ê¸° ìœ„í•´ Jenknis ë¶„ì‚° ì•„í‚¤í…ì²˜ì¸ Master-Slave êµ¬ì„±ì´ ë„ì…ë˜ì—ˆìŠµë‹ˆë‹¤. Jenkins Masterì™€ Slaveì˜ ì—­í•     êµ¬ë¶„ ì—­í•      Master * Build ì‘ì—… ì˜ˆì•½* Build ì‹¤í–‰ì„ ìœ„í•œ ì‘ì—… ë¶„ë°°* Slave node ëª¨ë‹ˆí„°ë§(í•„ìš”ì— ë”°ë¼ on/offline ì „í™˜ ê°€ëŠ¥)* Build ê²°ê³¼ ê¸°ë¡   Slave * Jenkins Masterì˜ ìš”ì²­ ìˆ˜ì‹ * Build ì‹¤í–‰    Jenkins Master-Slave ì—°ë™ ë°©ë²• Jenkins Master-SlaveëŠ” ë‹¤ìŒì˜ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±ì‹œí‚¤ë©´ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n Master ì„œë²„ì—ì„œ Slave ì„œë²„ì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì • Slave ì„œë²„ì˜ Jenkins Java ìš”êµ¬ì‚¬í•­ ì¶©ì¡±  1. Jenkins ì‚¬ìš©ì ìƒì„±(ëª¨ë“  Slave nodeì—ì„œ ì§„í–‰) # adduser jenkins ì‚¬ìš©ì ìƒì„± í›„ ë‹¤ìŒê³¼ ê°™ì´ í™ˆë””ë ‰í† ë¦¬ì˜ ê¶Œí•œì„ ë³€ê²½í•´ì¤€ë‹¤ # chown ldccai:jenkins /home/jenkins # chmod 775 /home/jenkins  2. Java 8 ì„¤ì¹˜(ëª¨ë“  Slave nodeì—ì„œ ì§„í–‰) # apt-get install openjdk-8-jdk  3. Jenkinsì—ì„œ Slave node ë“±ë¡ ë“±ë¡ëœ ë…¸ë“œì˜ [ë¡œê·¸]ë¥¼ í™•ì¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ Master ì„œë²„ì™€ ì˜ ì—°ë™ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ","id":9,"section":"posts","summary":"Jenkins Master-Slave JenkinsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¨ì¼ ì„œë²„ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë‹¨ì¼ ì„œë²„ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì„ ì¶©ì¡±í•˜ê¸° ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¹Œë“œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ í™˜ê²½ì´ í•„","tags":["jenkins"],"title":"Jenkins Master-Slave êµ¬ì„±í•˜ê¸°","uri":"https://healinyoon.github.io/2020/08/20200827_jenkins_master_slave/","year":"2020"},{"content":"CI/CDë€ CI/CDëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ë‹¨ê³„ë¥¼ ìë™í™”í•˜ì—¬ ë³´ë‹¤ ì‘ì€ ì½”ë“œ ë‹¨ìœ„ì™€ ì§§ì€ ì£¼ê¸°ë¡œ Testì™€ Buildë¥¼ ìˆ˜í–‰í•˜ê³  ê³ ê°ì—ê²Œ ì œê³µí•˜ëŠ” ë°©ë²•ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\nCI(Continuous Integration): ì§€ì†ì  í†µí•© ê°œë°œìì˜ ë³€ê²½ ì‚¬í•­ì´ ì •ê¸°ì ìœ¼ë¡œ(ìµœìƒì˜ ê²½ìš° í•˜ë£¨ ì—¬ëŸ¬ë²ˆ) ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ ë˜ê³  ê³µìœ  ë¦¬í¬ì§€í† ë¦¬ì— ë³‘í•©ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤.\nCD(Continous Deploy or ontinuous Delivery): ì§€ì†ì  ë°°í¬ Jez Humbleì˜ ì •ì˜\nContinuous Deployment is about automating the release of a good build to the production environment. In fact, Humble thinks it might be more accurate to call it â€œcontinuous release.â€\nContinuous Delivery is about 1) ensuring that every good build is potentially ready for production release. At the very least, 2) itâ€™s sent to the user acceptance test (UAT) environment. 3) Your business team can then decide when a successful build in UAT can be deployed to production â€”and they can do so at the push of a button.\nìƒí™©ì— ë”°ë¼ ì´ë¯¸ ìš´ì˜ë˜ê³  ìˆëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì— ë°”ë¡œ release í•˜ëŠ” ê²ƒì€ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ë¡œ ì„ë² ë””ë“œ ì†Œí”„íŠ¸ì›¨ì–´ ë“±ì´ í•´ë‹¹ë©ë‹ˆë‹¤.\në”°ë¼ì„œ ì ì¬ì ìœ¼ë¡œëŠ” release ê°€ëŠ¥í•˜ì§€ë§Œ, í”„ë¡œë•ì…˜ í™˜ê²½ì— ìë™ìœ¼ë¡œ release ë˜ì§€ ì•ŠëŠ” ê²ƒì´ Continuous Delivery ì…ë‹ˆë‹¤. ì •ë¦¬  CI: ì§€ì†ì ì¸ ë¹Œë“œ / í…ŒìŠ¤íŠ¸ / í†µí•© CD: CIì˜ ì—°ì¥ì„  ~ Release ì¤€ë¹„ ì™„ë£Œ(Delivery) or ì œí’ˆ ì¶œì‹œ(Deploy)   Jenkins for CI/CD ë‹¤ì–‘í•œ CI/CD tool CI/CD êµ¬í˜„ì„ ìœ„í•œ ë‹¤ì–‘í•œ toolì´ ìˆìŠµë‹ˆë‹¤. toolì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ ì°¸ê³ \nì™œ Jenkinsì¸ê°€ JenkinsëŠ” ì•„ë˜ì™€ ê°™ì€ ê°•ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\n It is an open-source tool with great community support. It is easy to install. It has 1000+ plugins to ease your work. If a plugin does not exist, you can code it and share it with the community. It is free of cost. It is built with Java and hence, it is portable to all the major platforms.  í•˜ì§€ë§Œ ë‹¨ì  ì—­ì‹œ ì¡´ì¬í•©ë‹ˆë‹¤. CI/CD tool ì¤‘ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” Jenkins vs Gitlab vs Travis ë¹„êµ ê¸€ì„ ì°¸ê³ í•˜ì‹œë©´ Jenkinsì˜ ì¥ë‹¨ì ì„ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\n","id":10,"section":"posts","summary":"CI/CDë€ CI/CDëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ë‹¨ê³„ë¥¼ ìë™í™”í•˜ì—¬ ë³´ë‹¤ ì‘ì€ ì½”ë“œ ë‹¨ìœ„ì™€ ì§§ì€ ì£¼ê¸°ë¡œ Testì™€ Buildë¥¼ ìˆ˜í–‰í•˜ê³  ê³ ê°ì—ê²Œ ì œê³µí•˜ëŠ” ë°©ë²•ì„ ì˜ë¯¸","tags":["jenkins"],"title":"CI/CDì™€ Jenkins","uri":"https://healinyoon.github.io/2020/08/20200827_cicd_and_jenkins/","year":"2020"},{"content":"HUGO ê¸€ ìƒì„±í•˜ê¸° $ hugo new {íŒŒì¼ëª…}  HUGO ë¸”ë¡œê·¸ ë¹Œë“œ $ hugo -t {í…Œë§ˆëª…}  Git push $ cd public $ git add . $ git commit -m \u0026quot;{commit ë©”ì„¸ì§€}\u0026quot; $ git push origin master $ cd .. $ git add . $ git commit -m \u0026quot;{commit ë©”ì„¸ì§€}\u0026quot; $ git push origin master  ","id":11,"section":"posts","summary":"HUGO ê¸€ ìƒì„±í•˜ê¸° $ hugo new {íŒŒì¼ëª…} HUGO ë¸”ë¡œê·¸ ë¹Œë“œ $ hugo -t {í…Œë§ˆëª…} Git push $ cd public $ git add . $ git commit -m \u0026quot;{commit ë©”ì„¸ì§€}\u0026quot; $ git push origin master $ cd .. $ git add . $ git commit -m \u0026quot;{commit ë©”","tags":["go","hugo"],"title":"HUGO ë¸”ë¡œê·¸ ìƒˆê¸€ ì—…ë¡œë“œí•˜ê¸°","uri":"https://healinyoon.github.io/2020/08/20200827_hugo_blog/","year":"2020"},{"content":"Intro ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•´ ì•Œì•„ë³´ê³ , ì‚¬ìš© ë°©ë²•ì„ ë‹¤ë£¬ë‹¤. ì „ë°˜ì ìœ¼ë¡œ \u0026ldquo;ì´ê²ƒì´ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë‹¤\u0026rdquo; ì±…ì„ ì°¸ê³ í•˜ì˜€ê³ , ê³µë¶€í•œ ë‚´ìš©ì„ ì •ë¦¬í•˜ì˜€ë‹¤.\n 1. ì‰˜(shell) ì´ë€? ì‰˜ì€ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ëª…ë ¹ì„ í•´ì„í•´ì„œ ì»¤ë„ì— ì „ë‹¬í•˜ê±°ë‚˜, ì»¤ë„ì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\n1-1. ì‰˜ ëª…ë ¹ë¬¸ í˜•ì‹ ì‰˜ ëª…ë ¹ë¬¸ì˜ í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n{í”„ë¡¬í”„íŠ¸} {ëª…ë ¹ì–´} {ì˜µì…˜} {ì¸ì} ex) # cd ~ ex) # ls -al ex) # rm -rf testdir ex) # cat test.txt  1-2. ì‰˜ í™˜ê²½ë³€ìˆ˜ ì‰˜ì€ ë‹¤ì–‘í•œ í™˜ê²½ë³€ìˆ˜ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë°, ë¦¬ëˆ…ìŠ¤ì˜ ì£¼ìš” í™˜ê²½ë³€ìˆ˜ ëª©ë¡ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n   í™˜ê²½ë³€ìˆ˜ ì„¤ëª…     HOME í˜„ì¬ ì‚¬ìš©ìì˜ í™ˆë””ë ‰í† ë¦¬   PATH ì‹¤í–‰ íŒŒì¼ì„ ì°¾ëŠ” ë””ë ‰í† ë¦¬ ê²½ë¡œ   LANG ê¸°ë³¸ ì§€ì› ì–¸ì–´   PWD ì‚¬ìš©ìì˜ í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬   TERM ë¡œê·¸ì¸ í„°ë¯¸ë„ íƒ€ì…   SHELL ë¡œê·¸ì¸ì‹œ ì‚¬ìš©í•˜ëŠ” ì‰˜   USER í˜„ì¬ ì‚¬ìš©ìì˜ ì´ë¦„   DISPLAY X ë””ìŠ¤í”Œë ˆì´ ì´ë¦„   HOSTNAME í˜¸ìŠ¤íŠ¸ ì´ë¦„   USERNAME í˜„ì¬ ì‚¬ìš©ì ì´ë¦„   OSTYPE ìš´ì˜ì²´ì œ íƒ€ì…    í˜„ì¬ ì„¤ì •ëœ í™˜ê²½ ë³€ìˆ˜ëŠ” echo ${í™˜ê²½ë³€ìˆ˜ ì´ë¦„} ëª…ë ¹ì–´ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nex) echo $HOME ex) echo $HOSTNAME  í™˜ê²½ë³€ìˆ˜ ì„¤ì • ê°’ì„ ë³€ê²½í•˜ë ¤ë©´ export {í™˜ê²½ë³€ìˆ˜}={ê°’} ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ëœë‹¤. ê·¸ ì™¸ì˜ í™˜ê²½ë³€ìˆ˜ëŠ” printenv ëª…ë ¹ì–´ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë‹¨, ì¼ë¶€ í™˜ê²½ë³€ìˆ˜ëŠ” printenv ëª…ë ¹ì„ ì‹¤í–‰í•´ë„ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.\n 2. ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©í•´ë³´ê¸° ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë„ ì¼ë°˜ì ì¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì™€ ë¹„ìŠ·í•˜ê²Œ ë³€ìˆ˜, ë°˜ë³µë¬¸, ì œì–´ë¬¸ ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n2-1. ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±í•˜ê¸° ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ê³  script.shìœ¼ë¡œ ì €ì¥í•´ë³´ì.\n#!/bin/sh echo \u0026quot;User Name: \u0026quot; $USER echo \u0026quot;User Home Directory: \u0026quot; $HOME exit 0  ìœ„ì˜ ì½”ë“œë¥¼ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n 1í–‰: bashë¥¼ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ë¡œ, ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ì‹œ ì²« í–‰ì— ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼í•œë‹¤. 2, 3í–‰: echo ëª…ë ¹ì€ í™”ë©´ì— ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì´ë©°, ë¨¼ì € ë¬¸ìë¥¼ ì¶œë ¥í•˜ê³  ${í™˜ê²½ë³€ìˆ˜}ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì¶œë ¥í•œë‹¤. 4í–‰: ì¢…ë£Œ ì½”ë“œë¥¼ ë°˜í™˜í•˜ë©°, 0ì€ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì„±ê³µì„ ì˜ë¯¸í•œë‹¤.  2-2. ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰í•˜ê¸° ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì—ëŠ” í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆë‹¤.\n1) sh ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰\nsh {ì‹¤í–‰íŒŒì¼ ì´ë¦„} ex) sh script.sh [ì‹¤í–‰ ê²°ê³¼] User Name: rin_gu User Home Directory: /home/rin_gu  2) íŒŒì¼ ê¶Œí•œì„ ì‹¤í–‰ ê°€ëŠ¥í•˜ê²Œ ë³€ê²½í•˜ê³  ì‹¤í–‰\n# chmod +x {ì‹¤í–‰íŒŒì¼ ì´ë¦„} # ./{ì‹¤í–‰íŒŒì¼ ê²½ë¡œ} ex) # chmod +x script.sh # ./script.sh [ì‹¤í–‰ ê²°ê³¼] User Name: rin_gu User Home Directory: /home/rin_gu  3. ë³€ìˆ˜ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ë³€ìˆ˜ ì‚¬ìš©ì‹œ ì£¼ì˜í•´ì•¼í•  íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ë¯¸ë¦¬ ì„ ì–¸í•˜ì§€ ì•Šìœ¼ë©°, ì²˜ìŒ ë³€ìˆ˜ì— ê°’ì´ í• ë‹¹ë˜ë©´ ìë™ìœ¼ë¡œ ë³€ìˆ˜ê°€ ìƒì„±ëœë‹¤. ë³€ìˆ˜ì— ë„£ëŠ” ëª¨ë“  ê°’ì„ \u0026lsquo;ë¬¸ìì—´\u0026rsquo;ë¡œ ì·¨ê¸‰í•œë‹¤. ë³€ìˆ˜ ì´ë¦„ì˜ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•œë‹¤. ë³€ìˆ˜ë¥¼ ëŒ€ì…í•  ë•Œ \u0026lsquo;=\u0026rsquo; ì¢Œìš°ì— ê³µë°±ì´ ì—†ì–´ì•¼ í•œë‹¤.  3-1. ë³€ìˆ˜ì˜ ì…ì¶œë ¥ \u0026lsquo;$\u0026rsquo; ë¼ëŠ” ë¬¸ìê°€ ë“¤ì–´ê°„ ê¸€ìë¥¼ ì¶œë ¥í•˜ë ¤ë©´ \u0026lsquo;\u0026lsquo;ë¡œ ë¬¶ì–´ì£¼ê±°ë‚˜ ì•ì— \u0026lsquo;\\\u0026lsquo;ë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.\n#!/bin/sh var=\u0026quot;Hi Shell\u0026quot; echo $var echo '$var' echo \\$var exit 0 [ì‹¤í–‰ ê²°ê³¼] Hi Shell $var $var  ë³€ìˆ˜ì˜ ì…ë ¥ê³¼ ì¶œë ¥ì€ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n#!/bin/sh echo \u0026quot;ê°’ì„ ì…ë ¥í•˜ì„¸ìš”: \u0026quot; read var echo \u0026quot;ì…ë ¥ëœ ê°’ì€ \u0026quot; $var \u0026quot;ì…ë‹ˆë‹¤.\u0026quot; exit 0 [ì‹¤í–‰ ê²°ê³¼] ê°’ì„ ì…ë ¥í•˜ì„¸ìš”: shell script study ì…ë ¥ëœ ê°’ì€ shell script study ì…ë‹ˆë‹¤.  3-2. ìˆ«ì ê³„ì‚° ë³€ìˆ˜ì— ë„£ì€ ê°’ì€ ëª¨ë‘ ë¬¸ìì—´ì´ ë˜ë¯€ë¡œ, shell scriptì—ì„œ ì—°ì‚°ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” expr í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤. shell scriptì—ì„œ ìˆ«ì ê³„ì‚°ì„ í•˜ê¸° ìœ„í•œ ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n ìˆ˜ì‹ê³¼ í•¨ê»˜ ì—­ë”°ì˜´í‘œë¡œ ë¬¶ì–´ì¤˜ì•¼ í•œë‹¤. ìˆ˜ì‹ì— ê´„í˜¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê·¸ ì•ì— ì—­ìŠ¬ë˜ì‹œë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤. ê³±í•˜ê¸° ê¸°í˜¸ë¥¼ ì‚¬ìš©í•  ë•Œë„ ê·¸ ì•ì— ì—­ìŠ¬ë˜ì‹œë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.  #!/bin/sh n1=10 n2=$n1+20 echo $n2 n3=`expr $n1 + 20` echo $n3 n4=`expr \\( $n1 + 20 \\) / 10 \\* 2` echo $n4 exit 0 [ì‹¤í–‰ ê²°ê³¼] 10+20 30 // â€» ê° ë‹¨ì–´ë¥¼ ë„ì–´ì“°ê¸°í•´ì•¼í•˜ëŠ” ê²ƒì— ì£¼ì˜ 6  3-3. íŒŒë¼ë¯¸í„° ë³€ìˆ˜ íŒŒë¼ë¯¸í„° ë³€ìˆ˜ëŠ” $0, $1, $2 ë“±ì˜ í˜•íƒœë¥¼ ê°€ì§€ë©°, ì•„ë˜ì™€ ê°™ì´ ë§¤ì¹­ëœë‹¤.\n   ëª…ë ¹ì–´ íŒŒë¼ë¯¸í„° 1 íŒŒë¼ë¯¸í„° 2 íŒŒë¼ë¯¸í„° n\u0026hellip;     $0 $1 $2 $n\u0026hellip;    ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n   ./script 1 2     $0 $1 $2    #!/bin/sh echo \u0026quot;ì‹¤í–‰íŒŒì¼ ì´ë¦„: \u0026lt;$0\u0026gt;\u0026quot; echo \u0026quot;ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°: \u0026lt;$1\u0026gt;.\u0026quot; echo \u0026quot;ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°: \u0026lt;$2\u0026gt;.\u0026quot; echo \u0026quot;ì „ì²´ íŒŒë¼ë¯¸í„°ëŠ” \u0026lt;$*\u0026gt;ì´ë‹¤.\u0026quot; exit 0 [ì‹¤í–‰ ê²°ê³¼] ì‹¤í–‰íŒŒì¼ ì´ë¦„: \u0026lt;./script.sh\u0026gt; ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°: \u0026lt;1\u0026gt;. ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°: \u0026lt;2\u0026gt;. ì „ì²´ íŒŒë¼ë¯¸í„°ëŠ” \u0026lt;1 2\u0026gt;ì´ë‹¤.  4. ifë¬¸ ifë¬¸ì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ê³¼ ì¡°ê±´ ì—°ì‚°ìë¥¼ ì•Œì•„ë³´ì.\n4-1. ifë¬¸ ê¸°ë³¸ ë¬¸ë²• ifë¬¸ì˜ ê¸°ë³¸ ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\nif [ ì¡°ê±´ ] then ì°¸ì¼ ê²½ìš° ì‹¤í–‰ fi  ì´ë•Œ ì£¼ì˜í•  ì ì€ [ ì¡°ê±´ ] ì—ì„œ ê° ë‹¨ì–´ì— ëª¨ë‘ ê³µë°±ì´ ìˆì–´ì•¼ í•œë‹¤.\n#!/bin/sh if [ \u0026quot;rin_gu\u0026quot; = \u0026quot;rin_gu\u0026quot; ] then echo \u0026quot;ì°¸ ì…ë‹ˆë‹¤.\u0026quot; fi exit 0 [ì‹¤í–‰ ê²°ê³¼] ì°¸ ì…ë‹ˆë‹¤.  4-2. if-elseë¬¸ if-elseë¬¸ì˜ ê¸°ë³¸ ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\nif [ ì¡°ê±´ ] then ì°¸ì¼ ê²½ìš° ì‹¤í–‰ elseë¬¸ ê±°ì§“ì¸ ê²½ìš° ì‹¤í–‰ fi  #!/bin/sh if [ \u0026quot;rin_gu\u0026quot; = \u0026quot;shell script\u0026quot; ] then echo \u0026quot;ì°¸ ì…ë‹ˆë‹¤.\u0026quot; else echo \u0026quot;ê±°ì§“ ì…ë‹ˆë‹¤.\u0026quot; fi exit 0 [ì‹¤í–‰ ê²°ê³¼] ê±°ì§“ ì…ë‹ˆë‹¤.  4-3. ì¡°ê±´ë¬¸ì— ì‚¬ìš©ë˜ëŠ” ë¹„êµ ì—°ì‚°ì ì¡°ê±´ë¬¸ì— ì‚¬ìš©ë””ëŠ” ë¹„êµ ì—°ì‚°ìì—ëŠ” ë¬¸ìì—´ ë¹„êµ ì—°ì‚°ìì™€ ì‚°ìˆ  ë¹„êµ ì—°ì‚°ìê°€ ìˆë‹¤.\në¬¸ìì—´ ë¹„êµ ì—°ì‚°ì\n   ë¬¸ìì—´ ë¹„êµ ë‚´ìš© ì˜ˆì‹œ     = ê°™ìœ¼ë©´ ì°¸ \u0026ldquo;ë¬¸ìì—´\u0026rdquo; = \u0026ldquo;ë¬¸ìì—´\u0026rdquo;   != ê°™ì§€ ì•Šìœ¼ë©´ ì°¸ \u0026ldquo;ë¬¸ìì—´\u0026rdquo; != \u0026ldquo;ë¬¸ìì—´\u0026rdquo;   -n ë¬¸ìì—´ì´ NULL ê°’ì´ ì•„ë‹ˆë©´ ì°¸ -n \u0026ldquo;ë¬¸ìì—´\u0026rdquo;   -z ë¬¸ìì—´ì´ NULL ê°’ì´ë©´ ì°¸ -z \u0026ldquo;ë¬¸ìì—´\u0026rdquo;    ì‚°ìˆ  ë¹„êµ ì—°ì‚°ì\n   ì‚°ìˆ  ë¹„êµ ë‚´ìš© ì˜ˆì‹œ     -eq ë‘ ìˆ˜ì‹ì´ ê°™ìœ¼ë©´ ì°¸ ìˆ˜ì‹ -eq ìˆ˜ì‹   -ne ë‘ ìˆ˜ì‹ì´ ê°™ì§€ ì•Šìœ¼ë©´ ì°¸ ìˆ˜ì‹ -ne ìˆ˜ì‹   -gt ì™¼ìª½ ìˆ˜ì‹ì´ í¬ë©´ ì°¸ ìˆ˜ì‹ -gt ìˆ˜ì‹   -ge ì™¼ìª½ ìˆ˜ì‹ì´ í¬ê±°ë‚˜ ê°™ìœ¼ë©´ ì°¸ ìˆ˜ì‹ -ge ìˆ˜ì‹   -lt ì™¼ìª½ ìˆ˜ì‹ì´ ì‘ìœ¼ë©´ ì°¸ ìˆ˜ì‹ -lt ìˆ˜ì‹   -le ì™¼ìª½ ìˆ˜ì‹ì´ ì‘ê±°ë‚˜ ê°™ìœ¼ë©´ ì°¸ ìˆ˜ì‹ -le ìˆ˜ì‹   ! ìˆ˜ì‹ì´ ê±°ì§“ì´ë¼ë©´ ì°¸ !ìˆ˜ì‹    #!/bin/sh if [ 1024 -eq 2024 ] then echo \u0026quot;1024ê³¼ 2024ëŠ” ê°™ë‹¤.\u0026quot; else echo \u0026quot;1024ê³¼ 2024ëŠ” ë‹¤ë¥´ë‹¤.\u0026quot; fi exit 0 [ì‹¤í–‰ ê²°ê³¼] 1024ê³¼ 2024ëŠ” ë‹¤ë¥´ë‹¤.  4-4. ì¡°ê±´ë¬¸ì— ì‚¬ìš©ë˜ëŠ” íŒŒì¼ê³¼ ê´€ë ¨ëœ ì—°ì‚°ì ifë¬¸ì—ì„œ íŒŒì¼ì„ ì²˜ë¦¬í•˜ëŠ” ì¡°ê±´ ì—°ì‚°ìëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\níŒŒì¼ ì¡°ê±´ | ë‚´ìš© | ì˜ˆì‹œ \u0026mdash; | \u0026mdash; -d | íŒŒì¼ì´ ë””ë ‰í† ë¦¬ë©´ ì°¸ | -d íŒŒì¼ëª… -e | íŒŒì¼ì´ ì¡´ì¬í•˜ë©´ ì°¸ | -e íŒŒì¼ëª… -f | íŒŒì¼ì´ ì¼ë°˜ íŒŒì¼ì´ë©´ ì°¸ | -f íŒŒì¼ëª… -g | íŒŒì¼ì— set-group-idê°€ ì„¤ì •ë˜ë©´ ì°¸ | -g íŒŒì¼ëª… -r | íŒŒì¼ì´ ì½ê¸° ê°€ëŠ¥í•˜ë©´ ì°¸ | -r íŒŒì¼ëª… -s | íŒŒì¼ í¬ê¸°ê°€ 0ì´ ì•„ë‹ˆë©´ ì°¸ | -s íŒŒì¼ëª… -u | íŒŒì¼ì— set-user-idê°€ ì„¤ì •ë˜ë©´ ì°¸ | -u íŒŒì¼ëª… -w | íŒŒì¼ì´ ì“°ê¸° ê°€ëŠ¥í•˜ë©´ ì°¸ | -w íŒŒì¼ëª… -x | íŒŒì¼ì´ ì‹¤í–‰ ê°€ëŠ¥í•˜ë©´ ì°¸ | -x íŒŒì¼ëª…\n 5. caseë¬¸ caseë¬¸ì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì\n5-1. caseë¬¸ ê¸°ë³¸ ë¬¸ë²• caseë¬¸ì˜ ê¸°ë³¸ ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\ncase [ ë³€ìˆ˜ ] in ë³€ìˆ˜ê°’1) ë³€ìˆ˜ì™€ ë³€ìˆ˜ê°’1ì´ ì¼ì¹˜í•  ê²½ìš° ì‹¤í–‰ ë³€ìˆ˜ê°’2) ë³€ìˆ˜ì™€ ë³€ìˆ˜ê°’2ê°€ ì¼ì¹˜í•  ê²½ìš° ì‹¤í–‰ ... esac  5-2. case ë¬¸ ì‚¬ìš©í•´ë³´ê¸° (ì‘ì„±ì¤‘)\n","id":12,"section":"posts","summary":"Intro ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•´ ì•Œì•„ë³´ê³ , ì‚¬ìš© ë°©ë²•ì„ ë‹¤ë£¬ë‹¤. ì „ë°˜ì ìœ¼ë¡œ \u0026ldquo;ì´ê²ƒì´ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë‹¤\u0026rdquo; ì±…ì„ ì°¸ê³ í•˜ì˜€ê³ , ê³µë¶€","tags":["shell"],"title":"Shell Scripts ì‚¬ìš©í•˜ê¸°","uri":"https://healinyoon.github.io/2019/06/20190602_shell_script/","year":"2019"},{"content":"Intro ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” CentOSì— Dockerë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.\n 1. Docker ì„¤ì¹˜í•˜ê¸° # yum íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ yum update # docker, docker registry ì„¤ì¹˜ yum -y install docker docker-registry   2. Docker ì‹¤í–‰ ë° ì •ë³´ í™•ì¸ 2-1. Docker ì‹¤í–‰í•˜ê¸° # ì‹œìŠ¤í…œ ë¶€íŒ… ì‹œ dockerë¥¼ ì‹œì‘í•˜ë„ë¡ ì„¤ì • systemctl enable docker.service # Docker ì‹¤í–‰ systemctl start docker.service # Docker ìƒíƒœ í™•ì¸ systemctl status docker.service  2-2. Docker ëª…ë ¹ì–´ ì‚¬ìš©í•˜ê¸° Docker ëª…ë ¹ì–´ì˜ ê¸°ë³¸ í˜•ì‹ì€ docker {ëª…ë ¹ì–´} ì…ë‹ˆë‹¤.\n# Docker ë²„ì „ í™•ì¸ docker version # Docker ì‹¤í–‰ í™˜ê²½ í™•ì¸ docker system info # Docker ë””ìŠ¤í¬ ìƒíƒœ í™•ì¸ docker system df # ê·¸ ì™¸ Docker ëª…ë ¹ì–´ ì‚´í´ë³´ê¸° docker -help   3. Docker ì‚¬ìš©í•´ë³´ê¸° Dockerê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\n3-1. Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰í•˜ê¸° # Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ëª…ë ¹ì–´ docker run {ì˜µì…˜} {ì»¨í…Œì´ë„ˆ ëª…/ID}  docker run ëª…ë ¹ì–´ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ ì…ë‹ˆë‹¤. ì´ë•Œ dockersëŠ” ë¡œì»¬ì— í•´ë‹¹ ì´ë¯¸ì§€ê°€ ìˆëŠ”ì§€ í•™ì¸í•˜ê³ , ì—†ëŠ” ê²½ìš° docker hubì—ì„œ pullì„ ë¨¼ì € ì§„í–‰í•˜ê³  ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n3-2. Hello, world! docker run hello-world  hello-world ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.\nHello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the \u0026quot;hello-world\u0026quot; image from the Docker Hub. (amd64) 3. The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal.  3-3. Nginx ì´ë²ˆì—ëŠ” Nginx ì›¹ì„œë²„ë¥¼ dockerë¡œ ì„¤ì¹˜í•´ë³´ê² ìŠµë‹ˆë‹¤.\n# Nginx ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ docker pull nginx # ë‹¤ìš´ë¡œë“œí•œ ì´ë¯¸ì§€ í™•ì¸ docker images # Nginx ì»¨í…Œì´ë„ˆ ì‹¤í–‰ docker run --name nginx-webserver -d -p 80:80 nginx  docker run ëª…ë ¹ì–´ì—ì„œ ìì£¼ ì“°ì´ëŠ” ì˜µì…˜ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n \u0026ndash;name: ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ì„ ì„¤ì •í•œë‹¤. -d: ì»¨í…Œì´ë„ˆë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ì‹œí‚¨ë‹¤. -p: í˜¸ìŠ¤íŠ¸ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ í¬íŠ¸ë¥¼ ë§¤í•‘í•œë‹¤(í˜•ì‹: -p {host í¬íŠ¸}:{ì»¨í…Œì´ë„ˆ í¬íŠ¸}).  ì‹¤í–‰ì¤‘ì¸ docker ì»¨í…Œì´ë„ˆë¥¼ í™•ì¸í•˜ê³  ì‹¶ì„ ë•ŒëŠ” docker ps ëª…ë ¹ì–´ë¡œ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n# ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸ docker ps # ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸ docker container stats  ë§ˆì§€ë§‰ìœ¼ë¡œ http://localhost:80ìœ¼ë¡œ ì ‘ì†í•´ì„œ Nginx ì›¹ ë¸Œë¼ìš°ì €ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n ì°¸ê³  ì‚¬ì´íŠ¸  https://niceman.tistory.com/36 https://futurecreator.github.io/2018/11/16/docker-container-basics/ http://pyrasis.com/Docker/Docker-HOWTO  ","id":13,"section":"posts","summary":"Intro ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” CentOSì— Dockerë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. 1. Docker ì„¤ì¹˜í•˜ê¸° # yum íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ yum update # docker, docker registry ì„¤ì¹˜ yum -y install docker docker-registry 2. Docker ì‹¤í–‰ ë°","tags":["docker"],"title":"Docker ì„¤ì¹˜í•˜ê¸°(CentOS)","uri":"https://healinyoon.github.io/2019/06/20190611_docker_install/","year":"2019"}],"tags":[{"title":"azure","uri":"https://healinyoon.github.io/tags/azure/"},{"title":"docker","uri":"https://healinyoon.github.io/tags/docker/"},{"title":"go","uri":"https://healinyoon.github.io/tags/go/"},{"title":"helm","uri":"https://healinyoon.github.io/tags/helm/"},{"title":"hugo","uri":"https://healinyoon.github.io/tags/hugo/"},{"title":"jenkins","uri":"https://healinyoon.github.io/tags/jenkins/"},{"title":"kubernetes","uri":"https://healinyoon.github.io/tags/kubernetes/"},{"title":"shell","uri":"https://healinyoon.github.io/tags/shell/"}]}